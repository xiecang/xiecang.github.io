<!DOCTYPE html><html lang="en" class="scroll-smooth"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link href="/favicon.ico" rel="icon" sizes="any"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://xiecang.cc/posts/data-structures-and-algorithms/"><meta name="generator" content="Astro v4.16.8"><!-- General Meta Tags --><title>数据结构和算法学习笔记 | Cang&#39;s Blog</title><meta name="title" content="数据结构和算法学习笔记 | Cang's Blog"><meta name="description" content="本文大致梳理了常见的数据结构和算法，包含了动态数组、栈、队列、链表、选择排序、插入排序、归并排序、快速排序（单路、双路、三路）、 二分查找、set 和 map、优先队列、堆、冒泡排序、希尔排序、排序算法稳定性、线段树（区间树）、Tire(字典树)、并查集、 AVL 树、2-3树、红黑树、哈希表、SQRT 分解等。"><meta name="author" content="xc"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:title" content="数据结构和算法学习笔记 | Cang's Blog"><meta property="og:description" content="本文大致梳理了常见的数据结构和算法，包含了动态数组、栈、队列、链表、选择排序、插入排序、归并排序、快速排序（单路、双路、三路）、 二分查找、set 和 map、优先队列、堆、冒泡排序、希尔排序、排序算法稳定性、线段树（区间树）、Tire(字典树)、并查集、 AVL 树、2-3树、红黑树、哈希表、SQRT 分解等。"><meta property="og:url" content="https://xiecang.cc/posts/data-structures-and-algorithms/"><meta property="og:image" content="https://xiecang.cc/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.png"><!-- Article Published/Modified time --><meta property="article:published_time" content="2020-03-06T22:06:22.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://xiecang.cc/posts/data-structures-and-algorithms/"><meta property="twitter:title" content="数据结构和算法学习笔记 | Cang's Blog"><meta property="twitter:description" content="本文大致梳理了常见的数据结构和算法，包含了动态数组、栈、队列、链表、选择排序、插入排序、归并排序、快速排序（单路、双路、三路）、 二分查找、set 和 map、优先队列、堆、冒泡排序、希尔排序、排序算法稳定性、线段树（区间树）、Tire(字典树)、并查集、 AVL 树、2-3树、红黑树、哈希表、SQRT 分解等。"><meta property="twitter:image" content="https://xiecang.cc/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.png"><!-- Google JSON-LD Structured data --><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","headline":"数据结构和算法学习笔记 | Cang's Blog","image":"https://xiecang.cc/posts/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.png","datePublished":"2020-03-06T22:06:22.000Z","author":[{"@type":"Person","name":"xc","url":"https://xiecang.cc/"}]}</script><!-- Google Font --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&display=swap" rel="preload" as="style" onload="this.onload=null; this.rel='stylesheet';" crossorigin><meta name="theme-color" content=""><meta name="google-site-verification" content="DecnVgfxBStKU-1msMSJO3n40koVYL3Oy951LQ776j0"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script src="/toggle-theme.js" async></script><link rel="stylesheet" href="/_astro/about.DiAi45Kb.css">
<style>a:where(.astro-blwjyjpt){position:relative;text-decoration-line:underline;text-decoration-style:dashed}a:where(.astro-blwjyjpt):hover{top:-.125rem;--tw-text-opacity: 1;color:rgba(var(--color-accent),var(--tw-text-opacity))}a:where(.astro-blwjyjpt):focus-visible{padding:.25rem}a:where(.astro-blwjyjpt) svg:where(.astro-blwjyjpt){margin-right:-1.25rem;height:1.5rem;width:1.5rem;--tw-scale-x: .95;--tw-scale-y: .95;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));--tw-text-opacity: 1;color:rgba(var(--color-text-base),var(--tw-text-opacity));opacity:.8}.group:where(.astro-blwjyjpt):hover a:where(.astro-blwjyjpt) svg:where(.astro-blwjyjpt){fill:rgb(var(--color-accent))}
@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0;mix-blend-mode:plus-lighter}to{opacity:1;mix-blend-mode:plus-lighter}}@keyframes astroFadeOut{0%{opacity:1;mix-blend-mode:plus-lighter}to{opacity:0;mix-blend-mode:plus-lighter}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
.social-icons:where(.astro-wkojbtzc){display:flex;flex-direction:column;flex-wrap:wrap;align-items:center;justify-content:center;gap:.25rem}@media (min-width: 640px){.social-icons:where(.astro-wkojbtzc){align-items:flex-start}}.link-button:where(.astro-wkojbtzc){--tw-scale-x: .9;--tw-scale-y: .9;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));padding:.5rem}.link-button:where(.astro-wkojbtzc):hover{--tw-rotate: 6deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@media (min-width: 640px){.link-button:where(.astro-wkojbtzc){padding:.25rem}}main:where(.astro-vj4tpspi){margin-left:auto;margin-right:auto;width:100%;max-width:48rem;padding-left:1rem;padding-right:1rem;padding-bottom:3rem}.post-title:where(.astro-vj4tpspi){font-size:1.5rem;line-height:2rem;font-weight:600;--tw-text-opacity: 1;color:rgba(var(--color-accent),var(--tw-text-opacity))}
</style><script type="module" src="/_astro/hoisted.t7TrqCmB.js"></script>
<script type="module" src="/_astro/page.CPvyyiTs.js"></script>
<script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.10.2 - MIT builder.io */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,d,l,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(l=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(d=setTimeout(v,1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.10.2":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<l.length;n++)(o=r.createElement("script")).innerHTML=l[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(d)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/~partytown/']");if(r)e.newDocument.body.append(r)})})(document);</script><style>[data-astro-transition-scope="astro-plk3gbjq-1"] { view-transition-name: \6570\636E\7ED3\6784\548C\7B97\6CD5\5B66\4E60\7B14\8BB0; }@layer astro { ::view-transition-old(\6570\636E\7ED3\6784\548C\7B97\6CD5\5B66\4E60\7B14\8BB0) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(\6570\636E\7ED3\6784\548C\7B97\6CD5\5B66\4E60\7B14\8BB0) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(\6570\636E\7ED3\6784\548C\7B97\6CD5\5B66\4E60\7B14\8BB0) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(\6570\636E\7ED3\6784\548C\7B97\6CD5\5B66\4E60\7B14\8BB0) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-plk3gbjq-1"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-plk3gbjq-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-plk3gbjq-1"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-plk3gbjq-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-plk3gbjq-1"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-plk3gbjq-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-plk3gbjq-1"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-plk3gbjq-1"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-2"] { view-transition-name: \6570\636E\7ED3\6784; }@layer astro { ::view-transition-old(\6570\636E\7ED3\6784) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(\6570\636E\7ED3\6784) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(\6570\636E\7ED3\6784) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(\6570\636E\7ED3\6784) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-2"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-2"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style><style>[data-astro-transition-scope="astro-36ssibgs-3"] { view-transition-name: \7B97\6CD5; }@layer astro { ::view-transition-old(\7B97\6CD5) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }::view-transition-new(\7B97\6CD5) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back]::view-transition-old(\7B97\6CD5) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back]::view-transition-new(\7B97\6CD5) { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; } }[data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }[data-astro-transition=back][data-astro-transition-fallback="old"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="old"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeOut; }[data-astro-transition=back][data-astro-transition-fallback="new"] [data-astro-transition-scope="astro-36ssibgs-3"],
			[data-astro-transition=back][data-astro-transition-fallback="new"][data-astro-transition-scope="astro-36ssibgs-3"] { 
	animation-duration: 180ms;
	animation-timing-function: cubic-bezier(0.76, 0, 0.24, 1);
	animation-fill-mode: both;
	animation-name: astroFadeIn; }</style></head> <body>  <header class="astro-3ef6ksr2"> <a id="skip-to-content" href="#main-content" class="astro-3ef6ksr2">Skip to content</a> <div class="nav-container astro-3ef6ksr2"> <div class="top-nav-wrap astro-3ef6ksr2"> <a href="/" class="logo whitespace-nowrap astro-3ef6ksr2"> Cang&#39;s Blog </a> <nav id="nav-menu" class="astro-3ef6ksr2"> <button class="hamburger-menu focus-outline astro-3ef6ksr2" aria-label="Open Menu" aria-expanded="false" aria-controls="menu-items"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="menu-icon astro-3ef6ksr2"> <line x1="7" y1="12" x2="21" y2="12" class="line astro-3ef6ksr2"></line> <line x1="3" y1="6" x2="21" y2="6" class="line astro-3ef6ksr2"></line> <line x1="12" y1="18" x2="21" y2="18" class="line astro-3ef6ksr2"></line> <line x1="18" y1="6" x2="6" y2="18" class="close astro-3ef6ksr2"></line> <line x1="6" y1="6" x2="18" y2="18" class="close astro-3ef6ksr2"></line> </svg> </button> <ul id="menu-items" class="display-none sm:flex astro-3ef6ksr2"> <li class="astro-3ef6ksr2"> <a href="/posts/" class=" astro-3ef6ksr2">
Posts
</a> </li> <li class="astro-3ef6ksr2"> <a href="/tags/" class=" astro-3ef6ksr2">
Tags
</a> </li> <li class="astro-3ef6ksr2"> <a href="/about/" class=" astro-3ef6ksr2">
About
</a> </li> <li class="astro-3ef6ksr2"> <a href="/archives/" class="group inline-block hover:text-skin-accent focus-outline flex justify-center p-3 sm:p-1 astro-3ef6ksr2" aria-label="archives" title="Archives"> <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icons-tabler-outline !hidden sm:!inline-block astro-3ef6ksr2">  <path stroke="none" d="M0 0h24v24H0z" fill="none" class="astro-3ef6ksr2"></path> <path d="M3 4m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z" class="astro-3ef6ksr2"></path> <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" class="astro-3ef6ksr2"></path> <path d="M10 12l4 0" class="astro-3ef6ksr2"></path>  </svg> <span class="sm:sr-only astro-3ef6ksr2">
Archives
</span> </a> </li> <li class="astro-3ef6ksr2"> <a href="/search/" class="group inline-block hover:text-skin-accent focus-outline p-3 sm:p-1  flex astro-3ef6ksr2" aria-label="search" title="Search"> <svg xmlns="http://www.w3.org/2000/svg" class="scale-125 sm:scale-100 astro-3ef6ksr2"><path d="M19.023 16.977a35.13 35.13 0 0 1-1.367-1.384c-.372-.378-.596-.653-.596-.653l-2.8-1.337A6.962 6.962 0 0 0 16 9c0-3.859-3.14-7-7-7S2 5.141 2 9s3.14 7 7 7c1.763 0 3.37-.66 4.603-1.739l1.337 2.8s.275.224.653.596c.387.363.896.854 1.384 1.367l1.358 1.392.604.646 2.121-2.121-.646-.604c-.379-.372-.885-.866-1.391-1.36zM9 14c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z" class="astro-3ef6ksr2"></path> </svg> <span class="sr-only astro-3ef6ksr2">Search</span> </a> </li> <li class="astro-3ef6ksr2"> <button id="theme-btn" class="focus-outline astro-3ef6ksr2" title="Toggles light & dark" aria-label="auto" aria-live="polite"> <svg xmlns="http://www.w3.org/2000/svg" id="moon-svg" class="astro-3ef6ksr2"> <path d="M20.742 13.045a8.088 8.088 0 0 1-2.077.271c-2.135 0-4.14-.83-5.646-2.336a8.025 8.025 0 0 1-2.064-7.723A1 1 0 0 0 9.73 2.034a10.014 10.014 0 0 0-4.489 2.582c-3.898 3.898-3.898 10.243 0 14.143a9.937 9.937 0 0 0 7.072 2.93 9.93 9.93 0 0 0 7.07-2.929 10.007 10.007 0 0 0 2.583-4.491 1.001 1.001 0 0 0-1.224-1.224zm-2.772 4.301a7.947 7.947 0 0 1-5.656 2.343 7.953 7.953 0 0 1-5.658-2.344c-3.118-3.119-3.118-8.195 0-11.314a7.923 7.923 0 0 1 2.06-1.483 10.027 10.027 0 0 0 2.89 7.848 9.972 9.972 0 0 0 7.848 2.891 8.036 8.036 0 0 1-1.484 2.059z" class="astro-3ef6ksr2"></path> </svg> <svg xmlns="http://www.w3.org/2000/svg" id="sun-svg" class="astro-3ef6ksr2"> <path d="M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z" class="astro-3ef6ksr2"></path> </svg> </button> </li> </ul> </nav> </div> </div> <div class="max-w-3xl mx-auto px-4"> <hr class="border-skin-line" aria-hidden="true"> </div> </header>   <div class="mx-auto flex w-full max-w-3xl justify-start px-2 astro-vj4tpspi"> <button class="focus-outline mb-2 mt-8 flex hover:opacity-75 astro-vj4tpspi" onclick="(() => (history.length === 1) ? window.location = '/' : history.back())()"> <svg xmlns="http://www.w3.org/2000/svg" class="astro-vj4tpspi"><path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z" class="astro-vj4tpspi"></path> </svg><span class="astro-vj4tpspi">Go back</span> </button> </div> <main id="main-content" class="astro-vj4tpspi"> <h1 class="post-title astro-vj4tpspi" data-astro-transition-scope="astro-plk3gbjq-1">数据结构和算法学习笔记</h1> <div class="flex items-center space-x-2 opacity-80 my-2 astro-vj4tpspi"><svg xmlns="http://www.w3.org/2000/svg" class="scale-100 inline-block h-6 w-6 min-w-[1.375rem] fill-skin-base" aria-hidden="true"><path d="M7 11h2v2H7zm0 4h2v2H7zm4-4h2v2h-2zm0 4h2v2h-2zm4-4h2v2h-2zm0 4h2v2h-2z"></path><path d="M5 22h14c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2h-2V2h-2v2H9V2H7v2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2zM19 8l.001 12H5V8h14z"></path></svg><span class="sr-only">Published:</span><span class="italic text-base"><time dateTime="2020-03-06T22:06:22.000Z">Mar 6, 2020</time><span aria-hidden="true"> | </span><span class="sr-only"> at </span><span class="text-nowrap">10:06 PM</span><span aria-hidden="true"> | </span><span class="text-nowrap">45 min read</span></span></div> <article id="article" class="prose mx-auto mt-8 max-w-3xl astro-vj4tpspi"> <h2 id="目录">目录</h2>
<ul>
<li><a href="#%E5%86%99%E5%87%BA%E6%AD%A3%E7%A1%AE%E4%BB%A3%E7%A0%81">写出正确代码</a></li>
<li><a href="#%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90">复杂度分析</a></li>
<li><a href="#%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E6%B3%95">选择排序法</a>
<ul>
<li><a href="#%E5%A6%82%E4%BD%95%E5%8E%9F%E5%9C%B0%E5%AE%8C%E6%88%90%E4%B8%8D%E5%BC%80%E8%BE%9F%E6%96%B0%E6%95%B0%E7%BB%84">如何原地完成？不开辟新数组</a></li>
</ul>
</li>
<li><a href="#%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">数据结构</a>
<ul>
<li><a href="#%E6%95%B0%E7%BB%84">数组</a></li>
<li><a href="#%E6%A0%88">栈</a></li>
</ul>
</li>
<li><a href="#%E9%98%9F%E5%88%97">队列</a>
<ul>
<li><a href="#%E6%95%B0%E7%BB%84%E5%AE%9E%E7%8E%B0%E7%9A%84%E9%98%9F%E5%88%97">数组实现的队列</a></li>
<li><a href="#%E5%BE%AA%E7%8E%AF%E6%95%B0%E7%BB%84%E5%AE%9E%E7%8E%B0%E7%9A%84%E9%98%9F%E5%88%97">循环数组实现的队列</a></li>
</ul>
</li>
<li><a href="#%E9%93%BE%E8%A1%A8-linked-list">链表 linked list</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8%E9%93%BE%E8%A1%A8%E5%AE%9E%E7%8E%B0%E6%A0%88">使用链表实现栈</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E9%93%BE%E8%A1%A8%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97">使用链表实现队列</a></li>
<li><a href="#%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8">反转链表</a></li>
</ul>
</li>
<li><a href="#%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F">选择排序</a></li>
<li><a href="#%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F%E6%B3%95">插入排序法</a></li>
<li><a href="#%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F">归并排序</a>
<ul>
<li><a href="#%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E7%9A%84%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F">自底向上的归并排序</a></li>
<li><a href="#lcr-170-%E4%BA%A4%E6%98%93%E9%80%86%E5%BA%8F%E5%AF%B9%E7%9A%84%E6%80%BB%E6%95%B0">LCR 170. 交易逆序对的总数</a></li>
</ul>
</li>
<li><a href="#%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F">快速排序</a>
<ul>
<li><a href="#%E8%AE%A1%E7%AE%97-partition">计算 partition</a>
<ul>
<li><a href="#%E5%A6%82%E6%9E%9C%E5%85%81%E8%AE%B8%E5%BC%80%E8%BE%9F%E7%A9%BA%E9%97%B4">如果允许开辟空间</a></li>
<li><a href="#%E5%8E%9F%E5%9C%B0%E6%8E%92%E5%BA%8F">原地排序</a></li>
</ul>
</li>
<li><a href="#%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98">存在的问题</a>
<ul>
<li><a href="#%E5%AE%8C%E5%85%A8%E6%9C%89%E5%BA%8F%E7%9A%84%E6%83%85%E5%86%B5">完全有序的情况</a></li>
<li><a href="#%E5%AE%8C%E5%85%A8%E7%9B%B8%E7%AD%89%E7%9A%84%E6%83%85%E5%86%B5">完全相等的情况</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%8F%8C%E8%B7%AF%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F">双路快速排序</a></li>
<li><a href="#%E4%B8%89%E8%B7%AF%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F">三路快速排序</a></li>
<li><a href="#%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE">二分查找</a></li>
<li><a href="#%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%B3%95%E5%8F%98%E7%A7%8Dupper">二分查找法变种：upper</a></li>
<li><a href="#%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%B3%95%E5%8F%98%E7%A7%8Dceil">二分查找法变种：ceil</a></li>
<li><a href="#%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%B3%95%E5%8F%98%E7%A7%8Dlower_ceil">二分查找法变种：lower_ceil</a></li>
<li><a href="#%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%B3%95%E5%8F%98%E7%A7%8Dlower">二分查找法变种：lower</a></li>
<li><a href="#%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%B3%95%E5%8F%98%E7%A7%8Dlower_floor">二分查找法变种：lower_floor</a></li>
<li><a href="#%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%B3%95%E5%8F%98%E7%A7%8Dupper_floor">二分查找法变种：upper_floor</a></li>
<li><a href="#%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2%E6%A0%91">二分搜索树</a>
<ul>
<li><a href="#%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2%E6%A0%91%E9%81%8D%E5%8E%86">二分搜索树遍历</a></li>
<li><a href="#%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E5%B1%82%E5%BA%8F%E9%81%8D%E5%8E%86">二分搜索树的层序遍历</a></li>
<li><a href="#%E4%BA%8C%E5%88%86%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E5%88%A0%E9%99%A4%E4%BB%BB%E6%84%8F%E8%8A%82%E7%82%B9">二分搜索树的删除任意节点</a></li>
</ul>
</li>
<li><a href="#%E9%9B%86%E5%90%88%E5%92%8C%E6%98%A0%E5%B0%84-set-and-map">集合和映射 set and map</a></li>
<li><a href="#%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97">优先队列</a></li>
<li><a href="#%E5%A0%86">堆</a>
<ul>
<li><a href="#%E5%A0%86%E7%9A%84%E6%80%A7%E8%B4%A8">堆的性质</a></li>
<li><a href="#%E8%AE%A1%E7%AE%97%E5%85%AC%E5%BC%8F">计算公式</a></li>
<li><a href="#%E5%90%91%E5%A0%86%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0-sift-up">向堆中添加元素 sift up</a></li>
<li><a href="#%E4%BB%8E%E5%A0%86%E4%B8%AD%E5%8F%96%E5%87%BA%E5%85%83%E7%B4%A0">从堆中取出元素</a></li>
<li><a href="#%E5%8F%96%E5%87%BA%E6%9C%80%E5%A4%A7%E5%85%83%E7%B4%A0%E5%90%8E%E6%94%BE%E5%85%A5%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E5%85%83%E7%B4%A0replace">取出最大元素后，放入一个新的元素（replace）</a></li>
<li><a href="#%E5%B0%86%E4%BB%BB%E6%84%8F%E6%95%B0%E7%BB%84%E6%95%B4%E7%90%86%E6%88%90%E5%A0%86%E7%9A%84%E5%BD%A2%E7%8A%B6heapify">将任意数组整理成堆的形状（heapify）</a></li>
<li><a href="#%E5%A0%86%E5%8E%9F%E5%9C%B0%E6%8E%92%E5%BA%8F">堆原地排序</a></li>
<li><a href="#%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97%E8%A7%A3%E5%86%B3-topk-%E9%97%AE%E9%A2%98">优先队列解决 topK 问题</a></li>
</ul>
</li>
<li><a href="#%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F%E6%B3%95">冒泡排序法</a></li>
<li><a href="#%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F%E6%B3%95">希尔排序法</a>
<ul>
<li><a href="#%E6%AD%A5%E9%95%BF%E5%BA%8F%E5%88%97">步长序列</a></li>
</ul>
</li>
<li><a href="#%E5%9F%BA%E4%BA%8E%E6%AF%94%E8%BE%83%E7%9A%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93">基于比较的排序算法总结</a></li>
<li><a href="#%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E7%A8%B3%E5%AE%9A%E6%80%A7">排序算法的稳定性</a></li>
<li><a href="#%E7%BA%BF%E6%AE%B5%E6%A0%91%E5%8C%BA%E9%97%B4%E6%A0%91">线段树（区间树）</a></li>
<li><a href="#trie-%E5%AD%97%E5%85%B8%E6%A0%91-%E5%89%8D%E7%BC%80%E6%A0%91">Trie 字典树 前缀树</a></li>
<li><a href="#%E5%B9%B6%E6%9F%A5%E9%9B%86-union-find">并查集 Union Find</a>
<ul>
<li><a href="#%E5%9F%BA%E4%BA%8E-size-%E7%9A%84%E4%BC%98%E5%8C%96">基于 size 的优化</a></li>
<li><a href="#%E5%9F%BA%E4%BA%8E-rank-%E7%9A%84%E4%BC%98%E5%8C%96">基于 rank 的优化</a></li>
<li><a href="#%E8%B7%AF%E5%BE%84%E5%8E%8B%E7%BC%A9">路径压缩</a></li>
</ul>
</li>
<li><a href="#avl-%E6%A0%91">AVL 树</a>
<ul>
<li><a href="#avl-%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0%E5%90%8E%E5%A6%82%E4%BD%95%E7%BB%B4%E6%8C%81%E5%B9%B3%E8%A1%A1">AVL 添加元素后，如何维持平衡</a></li>
</ul>
</li>
<li><a href="#2-3-%E6%A0%91">2-3 树</a>
<ul>
<li><a href="#2-3-%E6%A0%91%E5%A6%82%E4%BD%95%E7%BB%B4%E6%8A%A4%E7%BB%9D%E5%AF%B9%E7%9A%84%E5%B9%B3%E8%A1%A1">2-3 树如何维护绝对的平衡</a></li>
</ul>
</li>
<li><a href="#%E7%BA%A2%E9%BB%91%E6%A0%91">红黑树</a>
<ul>
<li><a href="#%E7%BA%A2%E9%BB%91%E6%A0%91%E5%92%8C2-3%E6%A0%91%E7%9A%84%E7%AD%89%E4%BB%B7%E6%80%A7">红黑树和2-3树的等价性</a></li>
<li><a href="#%E7%BA%A2%E9%BB%91%E6%A0%91%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0">红黑树添加元素</a></li>
</ul>
</li>
<li><a href="#%E5%93%88%E5%B8%8C%E8%A1%A8">哈希表</a>
<ul>
<li><a href="#%E5%93%88%E5%B8%8C%E5%87%BD%E6%95%B0%E7%9A%84%E8%AE%BE%E8%AE%A1">哈希函数的设计</a></li>
<li><a href="#%E5%93%88%E5%B8%8C%E5%86%B2%E7%AA%81%E7%9A%84%E5%A4%84%E7%90%86-%E9%93%BE%E5%9C%B0%E5%9D%80%E6%B3%95">哈希冲突的处理 链地址法</a></li>
<li><a href="#%E5%93%88%E5%B8%8C%E5%86%B2%E7%AA%81%E7%9A%84%E5%A4%84%E7%90%86-%E5%BC%80%E6%94%BE%E5%9C%B0%E5%9D%80%E6%B3%95">哈希冲突的处理 开放地址法</a></li>
</ul>
</li>
<li><a href="#sqrt-%E5%88%86%E8%A7%A3">SQRT 分解</a>
<ul>
<li><a href="#sqrt-%E5%88%86%E8%A7%A3%E5%8C%BA%E9%97%B4%E6%9F%A5%E8%AF%A2">SQRT 分解区间查询</a></li>
<li><a href="#sqrt-%E5%88%86%E8%A7%A3%E7%9A%84%E5%8D%95%E5%85%83%E7%B4%A0%E6%9B%B4%E6%96%B0">SQRT 分解的单元素更新</a></li>
</ul>
</li>
<li><a href="#%E9%9D%9E%E6%AF%94%E8%BE%83%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95">非比较排序算法</a>
<ul>
<li><a href="#%E8%AE%A1%E6%95%B0%E6%8E%92%E5%BA%8F">计数排序</a></li>
</ul>
</li>
</ul>
<h2 id="写出正确代码">写出正确代码</h2>
<ul>
<li>
<p>定义清楚循环不变量</p>
</li>
<li>
<p>维护循环不变量</p>
</li>
<li>
<p>定义清楚函数功能</p>
<p>LinearSearch
输入： 数组 和 目标元素
输出： 目标元素所在的索引；若不存在返回 -1</p>
</li>
</ul>
<h2 id="复杂度分析">复杂度分析</h2>
<p>复杂度分析： 表示算法的性能
通常看最坏的情况
算法运行的上界</p>
<h2 id="选择排序法">选择排序法</h2>
<p>每次选择还没处理的最小元素，放到已处理的最后面</p>
<h3 id="如何原地完成不开辟新数组">如何原地完成？不开辟新数组</h3>
<p>i 指向已处理的最后一个元素
j 指向还没处理的第一个元素
minIndex 指向未处理的最小元素
arr[i, n) 是还没处理的元素
在 arr[i, n) 中找到最小的元素，放到 arr[i] 的位置</p>
<p>算法复杂度 O(n^2)</p>
<h2 id="数据结构">数据结构</h2>
<h3 id="数组">数组</h3>
<p>把数据码成一排进行存放</p>
<ul>
<li>数组最大的优点：快速查询，scores[2]</li>
</ul>
<p>新增和删除都是 O(n)
改/删除 已知索引 O(1), 未知 O(n)</p>
<h3 id="栈">栈</h3>
<p>栈是一种后进先出的数据结构</p>
<p>应用：
Undo(撤销) 操作
程序调用的系统栈</p>
<p>数组实现的栈：
进栈出栈的时间复杂度都是 O(1)</p>
<h2 id="队列">队列</h2>
<p>队列也是一种线性数据结构，先进先出
只能从队尾插入，队首取出</p>
<h3 id="数组实现的队列">数组实现的队列</h3>
<p>进（队尾添加） O(1)
出（队首出，后续向前挪一位） O(n)</p>
<h3 id="循环数组实现的队列">循环数组实现的队列</h3>
<p>思路
一个数组
front 指向队首
tail 指向队尾</p>
<p>front==tail 时候队列为空
入队时，(tail+1) % capacity
出队时， front - 1
当 tail 到容量上限时，且队首有空时（队列未满） tail 指向队首
(tail + 1) % capacity = front 时候队列满
队列满时始终有一个元素为空</p>
<p>可自动扩容
<img  src="/_astro/%E5%BE%AA%E7%8E%AF%E9%98%9F%E5%88%971.-_rbNCbD_Z2b3gwz.webp" alt="初始情况" width="1241" height="848" loading="lazy" decoding="async">
<img  src="/_astro/%E5%BE%AA%E7%8E%AF%E9%98%9F%E5%88%972.y7h2-lt4_23uan4.webp" alt="入队 tail + 1" width="1223" height="828" loading="lazy" decoding="async">
<img  src="/_astro/%E5%BE%AA%E7%8E%AF%E9%98%9F%E5%88%973.BXwE71mX_AUWoU.webp" alt="出队 front - 1" width="1201" height="821" loading="lazy" decoding="async">
<img  src="/_astro/%E5%BE%AA%E7%8E%AF%E9%98%9F%E5%88%974.DvwvnzK9_yAkTD.webp" alt="队列满，tail 指向队首" width="1166" height="790" loading="lazy" decoding="async"></p>
<p>进（队尾添加） O(1)
出（队首出） O(1)</p>
<p>todo:</p>
<ol>
<li>使用 size 不浪费一个空间</li>
<li>浪费一个空间，不使用 size</li>
<li>新双端队列(Deque)，可以在队首和队尾添加/删除元素 addFront removeFront addLast removeLast</li>
</ol>
<p>使用栈实现队列 232
使用队列实现栈 225</p>
<h2 id="链表-linked-list">链表 linked list</h2>
<p>数据存储在“节点”(Node)中
优点：真正的动态，不需要处理固定容量的问题
缺点：丧失了随机访问的能力</p>
<p>在链表的 index (0-based) 位置添加新元素e</p>
<ol>
<li>链表最好维护了一个虚拟头节点</li>
<li>prev 节点，指向虚拟头节点，往后遍历到 index 位置，这个位置就是待插入的前一位
比如 0->1->2->3->4 在 index=2 处插入 9，即插入到 1 和 2 的中间，由于虚拟头节点存在
内部指向为 dummyHead->0->1->2->3->4, 那 prev 就是从 dummyHead 往后挪 index 位(从0开始)
prev=1
Node(9).next = prev.next 即 9->2->3->4
prev.next = Node(9) 即 dummyHead->0->1->9->2->3->4</li>
</ol>
<p>添加操作 O(n)
addLast O(n)
addFirst O(1)
add O(n/2)=O(n)
删除 O(n)
查找 O(n)</p>
<h3 id="使用链表实现栈">使用链表实现栈</h3>
<p>链表头部增删复杂度都是 O(1)</p>
<h3 id="使用链表实现队列">使用链表实现队列</h3>
<p>需要加一个尾指针 tail, 指向最后一个元素
3->2->1->0->NULL
从尾部添加元素的复杂度是 O(1)， 无法根据 tail 指针来删除（只指向后一个元素）
故队列从链表 尾部插入，头部删除，均是 O(1)
<img  src="/_astro/%E9%93%BE%E8%A1%A8%E5%AE%9E%E7%8E%B0%E9%98%9F%E5%88%97.DFpa39Qe_Z12gegV.webp" alt="" width="1370" height="835" loading="lazy" decoding="async"></p>
<h3 id="反转链表">反转链表</h3>
<p>递归实现</p>
<p>reverseList(head.next) 时可以认为后面都已经反转结束了
函数返回的是反转后的头节点</p>
<p>此时 head 仍然指向的是，反转后的最末尾节点 head.next = 最末尾节点
所以，我们让反转后节点，最末尾节点的 next 指向 head 就是
(head.next).next = head</p>
<p><img  src="/_astro/%E5%8F%8D%E8%BD%AC%E9%93%BE%E8%A1%A8%E7%9A%84%E9%80%92%E5%BD%92%E5%AE%9E%E7%8E%B0.B3TJaBSE_2bjpXC.webp" alt="" width="1191" height="902" loading="lazy" decoding="async"></p>
<h2 id="选择排序">选择排序</h2>
<p>先把最小的拿出来，放到第一个位置，然后再从剩下的里面找最小的，放到第二个位置，以此类推
原地排序</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v6sg1.css"><script type="module" src="/_astro/ec.3zb7u.js"></script><figure class="frame"><figcaption class="header"></figcaption><pre data-language="go"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">func</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">selectionSort</span><span style="--0:#F8F8F2;--1:#24292E">[</span><span style="--0:#FFB86C;--0fs:italic;--1:#AE4B07">T</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#6F42C1">constraints</span><span style="--0:#F8F8F2;--1:#24292E">.</span><span style="--0:#8BE9FD;--0fs:italic;--1:#6F42C1">Ordered</span><span style="--0:#F8F8F2;--1:#24292E">](</span><span style="--0:#FFB86C;--0fs:italic;--1:#AE4B07">data</span><span style="--0:#F8F8F2;--1:#24292E"> []</span><span style="--0:#8BE9FD;--0fs:italic;--1:#6F42C1">T</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#96A1C2;--1:#616972">// i 指向已处理的最后一个元素</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#96A1C2;--1:#616972">// j 指向还没处理的第一个元素</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#96A1C2;--1:#616972">// minIndex 指向未处理的最小元素</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">:=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">len</span><span style="--0:#F8F8F2;--1:#24292E">(arr); i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">minIndex </span><span style="--0:#FF79C6;--1:#BF3441">:=</span><span style="--0:#F8F8F2;--1:#24292E"> i</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> j </span><span style="--0:#FF79C6;--1:#BF3441">:=</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">; j </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">len</span><span style="--0:#F8F8F2;--1:#24292E">(arr); j</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> arr[j] </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> arr[minIndex] {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                </span></span><span style="--0:#F8F8F2;--1:#24292E">minIndex </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> j</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">arr[i], arr[minIndex] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> arr[minIndex], arr[i]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="func selectionSort[T constraints.Ordered](data []T) {    // i 指向已处理的最后一个元素    // j 指向还没处理的第一个元素    // minIndex 指向未处理的最小元素    for i := 0; i < len(arr); i++ {        minIndex := i        for j := i + 1; j < len(arr); j++ {            if arr[j] < arr[minIndex] {                minIndex = j            }        }        arr[i], arr[minIndex] = arr[minIndex], arr[i]    }}"><div></div></button></div></figure></div>
<p>时间复杂度 O(n^2)</p>
<h2 id="插入排序法">插入排序法</h2>
<p>arr[0, i) 是有序的，arr[i, n) 是无序的
i 指向已经处理了的元素，从 0 开始，每次循环，把 arr[i] 插入到 arr[0, i) 的合适位置
(合适位置的计算方式： 从后往前比较，如果比前一个小，就交换位置，直到比前一个大，或者到了第一个位置)</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">class</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--1:#6F42C1">InsertionSort</span><span style="--0:#F8F8F2;--1:#24292E">&#x3C;</span><span style="--0:#F8F8F2;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">> {</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> &#x3C;</span><span style="--0:#F8F8F2;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">extends</span><span style="--1:#24292E"><span style="--0:#F8F8F2"> </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span><span style="--0:#F8F8F2">&#x3C;</span></span><span style="--0:#F8F8F2;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">>> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">sort</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] </span><span style="--0:#FFB86C;--0fs:italic;--1:#AE4B07">arr</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> arr.length; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#24292E">            </span></span><span style="--0:#8BE9FD;--0fs:italic;--1:#24292E">E</span><span style="--0:#F8F8F2;--1:#24292E"> temp </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> arr[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> j;</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (j </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> i; j </span><span style="--0:#FF79C6;--1:#BF3441">></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; j</span><span style="--0:#FF79C6;--1:#BF3441">--</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (temp.</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(arr[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">]) </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#24292E">                    </span></span><span style="--0:#8BE9FD;--0fs:italic;--1:#24292E">E</span><span style="--0:#F8F8F2;--1:#24292E"> tmp </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> arr[j];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                    </span></span><span style="--0:#F8F8F2;--1:#24292E">arr[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> arr[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                    </span></span><span style="--0:#F8F8F2;--1:#24292E">arr[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> tmp;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                </span></span><span style="--0:#F8F8F2;--1:#24292E">} </span><span style="--0:#FF79C6;--1:#BF3441">else</span><span style="--0:#F8F8F2;--1:#24292E"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">                    </span><span style="--0:#FF79C6;--1:#BF3441">break</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">arr[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> temp;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="public class InsertionSort<E> {    public static <E extends Comparable<E>> void sort(E[] arr) {        for (int i = 1; i < arr.length; i++) {            E temp = arr[i];            int j;            for (j = i; j > 0; j--) {                if (temp.compareTo(arr[j - 1]) < 0) {                    E tmp = arr[j];                    arr[j] = arr[j - 1];                    arr[j - 1] = tmp;                } else {                    break;                }            }            arr[j] = temp;        }    }}"><div></div></button></div></figure></div>
<p>优化： 交换操作改为赋值操作</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--1:#24292E"><span style="--0:#8BE9FD;--0fs:italic">E</span><span style="--0:#F8F8F2"> extends </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span></span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E">E</span><span style="--0:#FF79C6;--1:#BF3441">>></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">sort</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] arr) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> arr.length; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#24292E">        </span></span><span style="--0:#8BE9FD;--0fs:italic;--1:#24292E">E</span><span style="--0:#F8F8F2;--1:#24292E"> temp </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> arr[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> j;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (j </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> i; j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x26;&#x26;</span><span style="--0:#F8F8F2;--1:#24292E"> temp.</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(arr[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">]) </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; j</span><span style="--0:#FF79C6;--1:#BF3441">--</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">arr[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> arr[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">arr[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> temp;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="    public static <E extends Comparable<E>> void sort(E[] arr) {    for (int i = 1; i < arr.length; i++) {        E temp = arr[i];        int j;        for (j = i; j - 1 > 0 &#x26;&#x26; temp.compareTo(arr[j - 1]) < 0; j--) {            arr[j] = arr[j - 1];        }        arr[j] = temp;    }}"><div></div></button></div></figure></div>
<p>时间复杂度 O(n^2)
初始状态下，数组是有序的，那么时间复杂度是 O(n)</p>
<h2 id="归并排序">归并排序</h2>
<p>把需要排序的数组，一份为二，分别对子数组排序，然后把这两个排序后的子数组合并为一个即可
子数组的排序是同样的思路
MergeSort(arr, l, r)
对 arr 的 [l, r] 部分排序</p>
<p>MergeSort(arr, l, r) {
if (l >= r) return
int mid = (l + r) / 2;
// 对 arr[l, mid] 排序
MergeSort(arr, l, mid)
// 对 arr[mid, r] 排序
MergeSort(arr, mid, r)
// 将 arr[l, mid] 和 arr[mid, r] 合并
merge(arr, l, mid, r)
}</p>
<p><code>merge(arr, l, mid, r)</code> 的过程
当前指针如下， <code>arr[l:mid]</code> 有序， <code>arr[mid+1:r]</code> 有序
<img  src="/_astro/%E5%BD%92%E5%B9%B6merge.DgJVaS_K_QuAdh.webp" alt="img.png" width="776" height="467" loading="lazy" decoding="async">
复制一个新的数组 tmp
i 初始指向第一个区间的第一个元素 （i = l）
j 初始指向第二个区间的第一个元素 (j = mid+1)
<img  src="/_astro/%E5%BD%92%E5%B9%B6merge2.CAEkoa_i_Z183deI.webp" alt="img.png" width="778" height="577" loading="lazy" decoding="async">
把 i,j 中指向的最小的值复制到上面的数组中，对应指针+1
<img  src="/_astro/%E5%BD%92%E5%B9%B6merge3.Caxqq2qn_Z2eBM2C.webp" alt="img.png" width="787" height="566" loading="lazy" decoding="async"></p>
<p>归并的过程无法原地完成</p>
<p>算法复杂度：O(nlogn)</p>
<p>优化1: 如果 arr[mid] &#x3C; arr[mid + 1]，则说明 arr[l:mid] 和 arr[mid+1:r] 已经有序，不需要 merge</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">private</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--1:#24292E"><span style="--0:#8BE9FD;--0fs:italic">E</span><span style="--0:#F8F8F2"> extends </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span></span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E">E</span><span style="--0:#FF79C6;--1:#BF3441">>></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">sort</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] arr, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> l, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> r) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (l </span><span style="--0:#FF79C6;--1:#BF3441">>=</span><span style="--0:#F8F8F2;--1:#24292E"> r) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">return</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#96A1C2;--1:#616972">// 下面写法是为了防止整形溢出</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> mid </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> l </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> (r </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> l) </span><span style="--0:#FF79C6;--1:#BF3441">/</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">2</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#50FA7B;--1:#6F42C1">sort</span><span style="--0:#F8F8F2;--1:#24292E">(arr, l, mid);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#50FA7B;--1:#6F42C1">sort</span><span style="--0:#F8F8F2;--1:#24292E">(arr, mid </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">, r);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (arr[mid].</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(arr[mid </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">]) </span><span style="--0:#FF79C6;--1:#BF3441">></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#96A1C2;--1:#616972">// 优化1：如果 arr[mid] &#x3C; arr[mid + 1]，则说明 arr[l:mid] 和 arr[mid+1:r] 已经有序，不需要 merge</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#50FA7B;--1:#6F42C1">merge</span><span style="--0:#F8F8F2;--1:#24292E">(arr, l, mid, r);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="    private static <E extends Comparable<E>> void sort(E[] arr, int l, int r) {    if (l >= r) {        return;    }    // 下面写法是为了防止整形溢出    int mid = l + (r - l) / 2;    sort(arr, l, mid);    sort(arr, mid + 1, r);    if (arr[mid].compareTo(arr[mid + 1]) > 0) {        // 优化1：如果 arr[mid] < arr[mid + 1]，则说明 arr[l:mid] 和 arr[mid+1:r] 已经有序，不需要 merge        merge(arr, l, mid, r);    }}"><div></div></button></div></figure></div>
<p>对于有序的数组，归并排序的时间复杂度是 O(n)</p>
<p>优化2: 当数据规模小于 15 时，使用算法复杂度为O(n^2)的归并排序</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">private</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--1:#24292E"><span style="--0:#8BE9FD;--0fs:italic">E</span><span style="--0:#F8F8F2"> extends </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span></span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E">E</span><span style="--0:#FF79C6;--1:#BF3441">>></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">insertSort</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] arr, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> l, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> r) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> l </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;=</span><span style="--0:#F8F8F2;--1:#24292E"> r; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#24292E">        </span></span><span style="--0:#8BE9FD;--0fs:italic;--1:#24292E">E</span><span style="--0:#F8F8F2;--1:#24292E"> temp </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> arr[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> j;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (j </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> i; j </span><span style="--0:#FF79C6;--1:#BF3441">></span><span style="--0:#F8F8F2;--1:#24292E"> l </span><span style="--0:#FF79C6;--1:#BF3441">&#x26;&#x26;</span><span style="--0:#F8F8F2;--1:#24292E"> temp.</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(arr[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">]) </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; j</span><span style="--0:#FF79C6;--1:#BF3441">--</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">arr[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> arr[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">arr[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> temp;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">private</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--1:#24292E"><span style="--0:#8BE9FD;--0fs:italic">E</span><span style="--0:#F8F8F2"> extends </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span></span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E">E</span><span style="--0:#FF79C6;--1:#BF3441">>></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">sort</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] arr, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> l, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> r) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (l </span><span style="--0:#FF79C6;--1:#BF3441">>=</span><span style="--0:#F8F8F2;--1:#24292E"> r) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">return</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#96A1C2;--1:#616972">// 优化2：当数据规模小于 15 时，使用算法复杂度为O(n^2)的归并排序</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (r </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> l </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">15</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#50FA7B;--1:#6F42C1">insertSort</span><span style="--0:#F8F8F2;--1:#24292E">(arr, l, r);</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">return</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#96A1C2;--1:#616972">// 下面写法是为了防止整形溢出</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> mid </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> l </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> (r </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> l) </span><span style="--0:#FF79C6;--1:#BF3441">/</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">2</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#50FA7B;--1:#6F42C1">sort</span><span style="--0:#F8F8F2;--1:#24292E">(arr, l, mid);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#50FA7B;--1:#6F42C1">sort</span><span style="--0:#F8F8F2;--1:#24292E">(arr, mid </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">, r);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (arr[mid].</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(arr[mid </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">]) </span><span style="--0:#FF79C6;--1:#BF3441">></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#96A1C2;--1:#616972">// 优化1：如果 arr[mid] &#x3C; arr[mid + 1]，则说明 arr[l:mid] 和 arr[mid+1:r] 已经有序，不需要 merge</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#50FA7B;--1:#6F42C1">merge</span><span style="--0:#F8F8F2;--1:#24292E">(arr, l, mid, r);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="    private static <E extends Comparable<E>> void insertSort(E[] arr, int l, int r) {    for (int i = l + 1; i <= r; i++) {        E temp = arr[i];        int j;        for (j = i; j > l &#x26;&#x26; temp.compareTo(arr[j - 1]) < 0; j--) {            arr[j] = arr[j - 1];        }        arr[j] = temp;    }}private static <E extends Comparable<E>> void sort(E[] arr, int l, int r) {    if (l >= r) {        return;    }    // 优化2：当数据规模小于 15 时，使用算法复杂度为O(n^2)的归并排序    if (r - l <= 15) {        insertSort(arr, l, r);        return;    }    // 下面写法是为了防止整形溢出    int mid = l + (r - l) / 2;    sort(arr, l, mid);    sort(arr, mid + 1, r);    if (arr[mid].compareTo(arr[mid + 1]) > 0) {        // 优化1：如果 arr[mid] < arr[mid + 1]，则说明 arr[l:mid] 和 arr[mid+1:r] 已经有序，不需要 merge        merge(arr, l, mid, r);    }}"><div></div></button></div></figure></div>
<p>这个优化在某些解释执行语言中，可能不会有太大的提升，因为函数调用的开销比较大</p>
<p>优化3: 内存占用优化，merge 的时候，之前写法每次都开辟一个新数组，新的写法是，在初次调用的时候就创建这个数组
后续的 merge 操作，都是在这个数组上进行操作</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">private</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--1:#24292E"><span style="--0:#8BE9FD;--0fs:italic">E</span><span style="--0:#F8F8F2"> extends </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span></span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E">E</span><span style="--0:#FF79C6;--1:#BF3441">>></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">merge</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] arr, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> l, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> mid, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> r, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] temp) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#96A1C2;--1:#616972">// 把 arr 中的 l 到 r 区间的元素复制到 temp 中</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">System.</span><span style="--0:#50FA7B;--1:#6F42C1">arraycopy</span><span style="--0:#F8F8F2;--1:#24292E">(arr, l, temp, l, r </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> l </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> l, j </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> mid </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#96A1C2;--1:#616972">// 每轮循环为 arr[k] 赋值</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> k </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> l; k </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;=</span><span style="--0:#F8F8F2;--1:#24292E"> r; k</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (i </span><span style="--0:#FF79C6;--1:#BF3441">></span><span style="--0:#F8F8F2;--1:#24292E"> mid) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#96A1C2;--1:#616972">// 左区间已经全部处理完毕</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">arr[k] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> temp[j];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">j</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">} </span><span style="--0:#FF79C6;--1:#BF3441">else</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (j </span><span style="--0:#FF79C6;--1:#BF3441">></span><span style="--0:#F8F8F2;--1:#24292E"> r) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#96A1C2;--1:#616972">// 右区间已经全部处理完毕</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">arr[k] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> temp[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">} </span><span style="--0:#FF79C6;--1:#BF3441">else</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (temp[i].</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(temp[j]) </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#96A1C2;--1:#616972">// 左区间更小</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">arr[k] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> temp[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">} </span><span style="--0:#FF79C6;--1:#BF3441">else</span><span style="--0:#F8F8F2;--1:#24292E"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#96A1C2;--1:#616972">// 右区间更小</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">arr[k] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> temp[j];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">j</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="    private static <E extends Comparable<E>> void merge(E[] arr, int l, int mid, int r, E[] temp) {    // 把 arr 中的 l 到 r 区间的元素复制到 temp 中    System.arraycopy(arr, l, temp, l, r - l + 1);    int i = l, j = mid + 1;    // 每轮循环为 arr[k] 赋值    for (int k = l; k <= r; k++) {        if (i > mid) {            // 左区间已经全部处理完毕            arr[k] = temp[j];            j++;        } else if (j > r) {            // 右区间已经全部处理完毕            arr[k] = temp[i];            i++;        } else if (temp[i].compareTo(temp[j]) < 0) {            // 左区间更小            arr[k] = temp[i];            i++;        } else {            // 右区间更小            arr[k] = temp[j];            j++;        }    }}"><div></div></button></div></figure></div>
<h3 id="自底向上的归并排序">自底向上的归并排序</h3>
<ol>
<li>
<p>把每两个元素分为一组 size(sz)=1
<img  src="/_astro/%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F1.DYX-Vn2w_1t38Ez.webp" alt="img.png" width="1152" height="318" loading="lazy" decoding="async"></p>
</li>
<li>
<p>对这两个包含一个元素的有序数据进行归并排序，得到一个长度为 2 的有序数组
<img  src="/_astro/%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F2.BCmzwrrY_1iUK28.webp" alt="img.png" width="1183" height="472" loading="lazy" decoding="async">
<img  src="/_astro/%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F3.B-JOkDRi_1B4OjO.webp" alt="img.png" width="1132" height="457" loading="lazy" decoding="async"></p>
</li>
<li>
<p>继续对排序后的有序数组进行归并
<img  src="/_astro/%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F4.J5k_lCeC_Zjx5eb.webp" alt="img.png" width="1131" height="508" loading="lazy" decoding="async">
<img  src="/_astro/%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F5.DxOfRHNJ_nlUqg.webp" alt="img.png" width="1078" height="520" loading="lazy" decoding="async"></p>
<p><img  src="/_astro/%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F6.BLsHkNPj_1yuHAI.webp" alt="img.png" width="1083" height="438" loading="lazy" decoding="async">
<img  src="/_astro/%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F7.BHuFRNFB_pRq33.webp" alt="img_1.png" width="1050" height="456" loading="lazy" decoding="async"></p>
</li>
</ol>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#96A1C2;--1:#616972">// 自底向上的归并排序</span></div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--1:#24292E"><span style="--0:#8BE9FD;--0fs:italic">E</span><span style="--0:#F8F8F2"> extends </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span></span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E">E</span><span style="--0:#FF79C6;--1:#BF3441">>></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">sortBU</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] arr) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] temp </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> Arrays.</span><span style="--0:#50FA7B;--1:#6F42C1">copyOf</span><span style="--0:#F8F8F2;--1:#24292E">(arr, arr.length);</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> n </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> arr.length;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#96A1C2;--1:#616972">// 遍历合并的区间长度</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> sz </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">; sz </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> n; sz </span><span style="--0:#FF79C6;--1:#BF3441">+=</span><span style="--0:#F8F8F2;--1:#24292E"> sz) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#96A1C2;--1:#616972">// 遍历合并的两个区间的起始位置 i</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#96A1C2;--1:#616972">// 合并 [i, i+sz-1] 和 [i+sz, i+sz+sz-1]</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; i </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> sz </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> n; i </span><span style="--0:#FF79C6;--1:#BF3441">+=</span><span style="--0:#F8F8F2;--1:#24292E"> sz </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> sz) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (arr[i </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> sz </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">].</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(arr[i </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> sz]) </span><span style="--0:#FF79C6;--1:#BF3441">></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#96A1C2;--1:#616972">// 当前面的区间大于后面时，才执行归并操作，否则就已经是有序的了</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> r </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> Math.</span><span style="--0:#50FA7B;--1:#6F42C1">min</span><span style="--0:#F8F8F2;--1:#24292E">(i </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> sz </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> sz </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">, n </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#50FA7B;--1:#6F42C1">merge</span><span style="--0:#F8F8F2;--1:#24292E">(arr, i, i </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> sz </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">, r, temp);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// 自底向上的归并排序public static <E extends Comparable<E>> void sortBU(E[] arr) {    E[] temp = Arrays.copyOf(arr, arr.length);    int n = arr.length;    // 遍历合并的区间长度    for (int sz = 1; sz < n; sz += sz) {        // 遍历合并的两个区间的起始位置 i        // 合并 [i, i+sz-1] 和 [i+sz, i+sz+sz-1]        for (int i = 0; i + sz < n; i += sz + sz) {            if (arr[i + sz - 1].compareTo(arr[i + sz]) > 0) {                // 当前面的区间大于后面时，才执行归并操作，否则就已经是有序的了                int r = Math.min(i + sz + sz - 1, n - 1);                merge(arr, i, i + sz - 1, r, temp);            }        }    }}"><div></div></button></div></figure></div>
<h3 id="lcr-170-交易逆序对的总数"><a href="https://leetcode.cn/problems/shu-zu-zhong-de-ni-xu-dui-lcof/">LCR 170. 交易逆序对的总数</a></h3>
<p><img  src="/_astro/%E9%80%86%E5%BA%8F%E5%AF%B91.CBd70WJf_Z1hnjyY.webp" alt="img.png" width="1106" height="848" loading="lazy" decoding="async">
<img  src="/_astro/%E9%80%86%E5%BA%8F%E5%AF%B92.ChniqTAu_Z29tzIB.webp" alt="img_1.png" width="1153" height="861" loading="lazy" decoding="async"></p>
<h2 id="快速排序">快速排序</h2>
<p>选择数组<code>[l, r]</code>第一个元素 v 作为标定点，
执行 <code>int p = partition(arr, l, r)</code> 函数
把数组分为三部分，左边为小于 v, 中间为 v, 右边大于 v(暂时不考虑等于v)
返回值的 p 是一个索引，对应 v 标定点所在位置
<img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F1.C_xMnb0-_22mgdG.webp" alt="img.png" width="1291" height="855" loading="lazy" decoding="async">
<img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F2.CCT8eM-J_1FBzcV.webp" alt="img.png" width="1549" height="884" loading="lazy" decoding="async"></p>
<h3 id="计算-partition">计算 partition</h3>
<p><img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F3.DLuGwYbV_Z24MCaL.webp" alt="img_1.png" width="1370" height="525" loading="lazy" decoding="async"></p>
<h4 id="如果允许开辟空间">如果允许开辟空间</h4>
<p>使用额外两个数组，小于 v 放 left， 大于 v 放 right，就完成了
<img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F4.Cj9xfqp8_1AWAI9.webp" alt="img.png" width="1235" height="812" loading="lazy" decoding="async"></p>
<h4 id="原地排序">原地排序</h4>
<p>取第一个元素v， j 指向小于 v 和大于 v 所在位置的索引
i指向未整理的最近一个元素
<img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F5.a50i6wEg_1Y9fIm.webp" alt="img_2.png" width="1426" height="783" loading="lazy" decoding="async"></p>
<p>如果 i 指向的元素 e 大于 v, i++ 即可，它就处于 <code>> v</code> 的区间中
<img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F6.IUB5mIpq_GUaFu.webp" alt="img_3.png" width="1453" height="849" loading="lazy" decoding="async"></p>
<p>如果 e&#x3C;v, 那么让 j+1 和 i 指向元素互换即可
<img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F7.CEgw2UyX_Z28oCe3.webp" alt="img_4.png" width="1433" height="859" loading="lazy" decoding="async"></p>
<p>最后，将 l, 和 j 指向元素交换即可
<img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F8.7qlZlsYi_24sJxx.webp" alt="img_5.png" width="1502" height="830" loading="lazy" decoding="async"></p>
<h3 id="存在的问题">存在的问题</h3>
<h4 id="完全有序的情况">完全有序的情况</h4>
<p>对于完全有序的数组，每次都会对少一个元素的有序数组进行递归，时间复杂度 O(n^2), 递归深度 O(n)
<img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F9.BNFjDFHl_5R3IX.webp" alt="img.png" width="1595" height="910" loading="lazy" decoding="async"></p>
<p>解决方案：</p>
<p>不使用第一个元素作为标记点，随机选择一个元素，然后和第一个元素交换即可</p>
<h4 id="完全相等的情况">完全相等的情况</h4>
<p><img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F10.D3EFriGQ_Z1gtxai.webp" alt="img.png" width="1457" height="683" loading="lazy" decoding="async"></p>
<p>会和上面一样，时间复杂度 O(n^2)
解决方案：
双路快速排序</p>
<h2 id="双路快速排序">双路快速排序</h2>
<p>v 为标定点，左边的元素存放小于 v 的元素，右边的元素存放大于 v 的元素
<img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F11.BnJqYNqi_5p42P.webp" alt="img.png" width="1438" height="774" loading="lazy" decoding="async"></p>
<p>i 从 l 开始扫描，所有遇到小于等于 v 的元素，i++,直到遇到大于 v 的元素
j 从 r 开始扫描，所有遇到大等于于 v 的元素，j—,直到遇到小于 v 的元素
<img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F12.6zZ5mhqP_Zjbs5Y.webp" alt="img_1.png" width="1438" height="783" loading="lazy" decoding="async"></p>
<p>然后把这两个元素交换位置，这样，l 到 i 都是小于 v 的元素，j 到 r 都是大于 v 的元素，然后 i++, j— 继续扫描
<img  src="/_astro/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F13.D41BAUDA_V2Y8h.webp" alt="img_2.png" width="1405" height="807" loading="lazy" decoding="async"></p>
<p>最坏情况下，时间复杂度 O(n^2)，概率很小
平均情况下，时间复杂度 O(nlogn)</p>
<h2 id="三路快速排序">三路快速排序</h2>
<p>对于元素都相同的情况，可以不用再次排序
三路排序在排序过程中，把数组划分为了三部分，小于 v，等于 v，大于 v</p>
<p><img  src="/_astro/%E4%B8%89%E8%B7%AF%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F1.hke4u4XM_1jQJJG.webp" alt="img.png" width="1432" height="752" loading="lazy" decoding="async">
<img  src="/_astro/%E4%B8%89%E8%B7%AF%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F2.LzgYwuyA_Z1GVHL7.webp" alt="img_1.png" width="1454" height="811" loading="lazy" decoding="async">
对于元素 e, 如果 等于 v, 那么直接划入等于 v 的部分，i++
如果 e &#x3C; v, 那么和等于 v 的第一个元素交换位置，i++, lt++
如果 e > v, 那么和大于 v 前的第一个元素交换位置，gt—
终止条件，i >= gt
最后，把 l 和 lt 位置的元素交换位置
<img  src="/_astro/%E4%B8%89%E8%B7%AF%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F3.B66PtT9L_1oQGPT.webp" alt="img_2.png" width="1470" height="864" loading="lazy" decoding="async"></p>
<p>速度对比</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">Random Array:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">MergeSort, n = 1000000 : 0.429069 s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">QuickSort, n = 1000000 : 0.257638 s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">QuickSort2Ways, n = 1000000 : 0.209404 s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">QuickSort3Ways, n = 1000000 : 0.400175 s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">Ordered Array:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">MergeSort, n = 1000000 : 0.003160 s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">QuickSort, n = 1000000 : 0.189545 s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">QuickSort2Ways, n = 1000000 : 0.050844 s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">QuickSort3Ways, n = 1000000 : 0.382524 s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">Save value Array:</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">MergeSort, n = 1000000 : 0.002958 s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">QuickSort2Ways, n = 1000000 : 0.148120 s</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">QuickSort3Ways, n = 1000000 : 0.001708 s</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Random Array:MergeSort, n = 1000000 : 0.429069 sQuickSort, n = 1000000 : 0.257638 sQuickSort2Ways, n = 1000000 : 0.209404 sQuickSort3Ways, n = 1000000 : 0.400175 sOrdered Array:MergeSort, n = 1000000 : 0.003160 sQuickSort, n = 1000000 : 0.189545 sQuickSort2Ways, n = 1000000 : 0.050844 sQuickSort3Ways, n = 1000000 : 0.382524 sSave value Array:MergeSort, n = 1000000 : 0.002958 sQuickSort2Ways, n = 1000000 : 0.148120 sQuickSort3Ways, n = 1000000 : 0.001708 s"><div></div></button></div></figure></div>
<p><a href="https://leetcode.com/problems/sort-colors/description/">75.颜色分类</a></p>
<p>使用三路快速排序解决</p>
<p>Select K 问题
给出一个无序数组，找出数组的第，k 小的元素
<img  src="/_astro/Select_K%E9%97%AE%E9%A2%98.DqLCUQmA_2g6rIR.webp" alt="img.png" width="1086" height="652" loading="lazy" decoding="async"></p>
<p>经过一轮 partition 后，我们可以获得，小于标定点的元素，和大于标定点的元素，
标定点此时在数组中的位置是确定的
<img  src="/_astro/Select_K%E9%97%AE%E9%A2%982.DVA40iPo_Z1Y43bd.webp" alt="img.png" width="1315" height="791" loading="lazy" decoding="async">
<img  src="/_astro/Select_K%E9%97%AE%E9%A2%983.Cy_NJuS3_Z2jikqg.webp" alt="img.png" width="1301" height="821" loading="lazy" decoding="async"></p>
<p>类似的题目，<a href="https://leetcode.com/problems/kth-largest-element-in-an-array/description/">数组中第 k 个最大的元素</a>
<a href="https://leetcode.cn/problems/smallest-k-lcci/description/">最小的k个数</a></p>
<h2 id="二分查找">二分查找</h2>
<p>算法复杂度O(logn)
<img  src="/_astro/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE1.CYMGoNf-_2kfBz4.webp" alt="img.png" width="1338" height="811" loading="lazy" decoding="async"></p>
<h2 id="二分查找法变种upper">二分查找法变种：upper</h2>
<p>查找大于 target 的最小值</p>
<h2 id="二分查找法变种ceil">二分查找法变种：ceil</h2>
<p><img  src="/_astro/ceil.BnjpxAOy_1qC66t.webp" alt="img.png" width="1293" height="797" loading="lazy" decoding="async"></p>
<h2 id="二分查找法变种lower_ceil">二分查找法变种：lower_ceil</h2>
<p><img  src="/_astro/lower_ceil.DdHX3SpA_Z3r5wG.webp" alt="img.png" width="1311" height="782" loading="lazy" decoding="async"></p>
<h2 id="二分查找法变种lower">二分查找法变种：lower</h2>
<p><img  src="/_astro/lower.C1fZOeVi_ZwDkPJ.webp" alt="img.png" width="1406" height="866" loading="lazy" decoding="async"></p>
<h2 id="二分查找法变种lower_floor">二分查找法变种：lower_floor</h2>
<p><img  src="/_astro/lower_floor.C2WigbOv_mjkps.webp" alt="img.png" width="1325" height="776" loading="lazy" decoding="async"></p>
<h2 id="二分查找法变种upper_floor">二分查找法变种：upper_floor</h2>
<p><img  src="/_astro/upper_floor.B6HCboMX_1yNH0U.webp" alt="img.png" width="1303" height="822" loading="lazy" decoding="async"></p>
<h2 id="二分搜索树">二分搜索树</h2>
<p>定义：</p>
<ul>
<li>二分搜索树是二叉树</li>
<li>二分搜索树的每个节点的值：
<ul>
<li>大于起左子树所有节点的值</li>
<li>小于起右子树所有节点的值</li>
</ul>
</li>
<li>每一颗子树也是二分搜索树</li>
</ul>
<p><img  src="/_astro/binary_search_tree.Bt_EeM51_2ffOcl.webp" alt="img.png" width="1606" height="856" loading="lazy" decoding="async"></p>
<h3 id="二分搜索树遍历">二分搜索树遍历</h3>
<p><strong>前序遍历</strong></p>
<p>访问的节点在左右子树的前面</p>
<p><img  src="/_astro/traverse_left.DNWY4aGg_1NmRRI.webp" alt="img.png" width="1582" height="867" loading="lazy" decoding="async"></p>
<p><strong>中序遍历</strong>： 先左，后节点，最后右边， 这个输出结果就是从小到大排序结果</p>
<p><strong>后序遍历</strong>
应用：为二分搜索树释放内存</p>
<p>前序遍历的非递归写法：</p>
<p>先把要访问的节点压入栈，然后弹出访问其，然后分别压入右左子节点，继续弹出访问并压入右左子节点</p>
<p><img  src="/_astro/traverse_left2.C5m1B1x1_Z2lSx4z.webp" alt="img.png" width="1514" height="873" loading="lazy" decoding="async"></p>
<h3 id="二分搜索树的层序遍历">二分搜索树的层序遍历</h3>
<p>一个队列，先入队中间节点，弹出，然后分别入队其左右节点，继续弹出后入队其左右节点</p>
<p><img  src="/_astro/traverse2.CgSpADhM_Z1Fpv4I.webp" alt="img.png" width="1480" height="855" loading="lazy" decoding="async"></p>
<p>即广度优先遍历，优点</p>
<ul>
<li>更快的找到问题的解</li>
<li>常用于算法设计中-最短路径</li>
<li>图中的深度优先遍历和广度优先遍历</li>
</ul>
<h3 id="二分搜索树的删除任意节点">二分搜索树的删除任意节点</h3>
<p>如果待删除节点左子树为空，那么它的上一个节点指向它的右子树即可
如果待删除节点右子树为空，那么它的上一个节点指向它的左子树即可</p>
<p>如果待删除节点 d 左右子节点都在，遵循如下方法：</p>
<ol>
<li>找到比待删除节点大的最小节点，即待删除节点右子树的最小节点 s = min(d->right)</li>
<li>s 是 d 的后继</li>
<li>s->right = delMin(d.right)</li>
<li>s->left = d->left</li>
</ol>
<p><img  src="/_astro/delete_node1.CWXWO2-8_Z1VRGz2.webp" alt="img.png" width="1470" height="851" loading="lazy" decoding="async">
<img  src="/_astro/delete_node2.BomhPCe7_ZeRO5x.webp" alt="img.png" width="1492" height="855" loading="lazy" decoding="async">
<img  src="/_astro/delete_node3.DK3gQqiT_Z1TfwVR.webp" alt="img.png" width="1502" height="866" loading="lazy" decoding="async"></p>
<p>当然，这个节点 s 也可以是左子树中最大的节点 p，p = max(d->left)
<img  src="/_astro/delete_node4.CXKWW9XX_Z8GRoB.webp" alt="img.png" width="1495" height="844" loading="lazy" decoding="async"></p>
<h2 id="集合和映射-set-and-map">集合和映射 set and map</h2>
<p><img  src="/_astro/set.CTNPZ1no_Z25ubff.webp" alt="img.png" width="1357" height="818" loading="lazy" decoding="async"></p>
<p>二分搜索树集合和链表集合的时间复杂度分析
<img  src="/_astro/%E9%9B%86%E5%90%88%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90.AJQVjHhE_1iOmOi.webp" alt="img.png" width="1320" height="795" loading="lazy" decoding="async"></p>
<p><img  src="/_astro/%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%E5%92%8C%E6%97%A0%E5%BA%8F%E9%9B%86%E5%90%88.CizUw4-N_ITgib.webp" alt="img.png" width="1160" height="589" loading="lazy" decoding="async"></p>
<p><img  src="/_astro/%E6%98%A0%E5%B0%84%E7%9A%84%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90.B6leEtg8_Z12zvhb.webp" alt="img.png" width="1396" height="826" loading="lazy" decoding="async">
<img  src="/_astro/%E6%9C%89%E5%BA%8F%E6%98%A0%E5%B0%84%E5%92%8C%E6%97%A0%E5%BA%8F%E6%98%A0%E5%B0%84.C1XoStmT_RGXeR.webp" alt="img.png" width="1157" height="595" loading="lazy" decoding="async"></p>
<h2 id="优先队列">优先队列</h2>
<p>什么是优先队列？
普通队列：先进先出，后进后出
优先队列：出队顺序和入队顺序无关；和优先级有关</p>
<p>应用： 操作系统时间片调度
特点：队列中元素动态变化，动态优先级</p>
<p><img  src="/_astro/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97.zhGrKz4F_1vjSLF.webp" alt="img.png" width="1270" height="780" loading="lazy" decoding="async"></p>
<h2 id="堆">堆</h2>
<h3 id="堆的性质">堆的性质</h3>
<p>二叉堆是一棵完全二叉树（缺失的节点一定在右下侧）
<img  src="/_astro/%E4%BA%8C%E5%8F%89%E5%A0%86%E6%98%AF%E4%B8%80%E6%A3%B5%E5%AE%8C%E5%85%A8%E4%BA%8C%E5%8F%89%E6%A0%91.B1wbPpNH_1ErSsN.webp" alt="img.png" width="1478" height="835" loading="lazy" decoding="async"></p>
<p>堆中的某个节点总是不大于其父节点的值（最大堆） （节点的值大于等于其子节点的值）
<img  src="/_astro/%E4%BA%8C%E5%8F%89%E5%A0%86%E6%80%A7%E8%B4%A8.BOm8kPYv_Z1UgHIf.webp" alt="img.png" width="1506" height="834" loading="lazy" decoding="async"></p>
<h3 id="计算公式">计算公式</h3>
<p>用数组存储二叉堆
<img  src="/_astro/%E7%94%A8%E6%95%B0%E7%BB%84%E5%AD%98%E5%82%A8%E4%BA%8C%E5%8F%89%E5%A0%86.Dv6WJI-o_Zv7upH.webp" alt="img.png" width="1622" height="848" loading="lazy" decoding="async">
数组下标从0开始
<img  src="/_astro/%E7%94%A8%E6%95%B0%E7%BB%84%E5%AD%98%E5%82%A8%E4%BA%8C%E5%8F%89%E5%A0%862.Clr3WAL-_ZUEPIh.webp" alt="img.png" width="1622" height="845" loading="lazy" decoding="async"></p>
<h3 id="向堆中添加元素-sift-up">向堆中添加元素 sift up</h3>
<ol>
<li>向堆中添加元素，就是加入数组的末尾，
<img  src="/_astro/sift-up.RI2U72dv_Z1lHBR4.webp" alt="img.png" width="1554" height="830" loading="lazy" decoding="async"></li>
<li>同时需要满足，父亲节点的值要大于它，如果不满足，交换它和父亲节点的位置
<img  src="/_astro/sift-up2.AnwU6EuO_Eba51.webp" alt="img.png" width="1542" height="838" loading="lazy" decoding="async">
以此类推
<img  src="/_astro/sift-up3.DDaTedSj_1gERms.webp" alt="img_1.png" width="1550" height="816" loading="lazy" decoding="async"></li>
</ol>
<h3 id="从堆中取出元素">从堆中取出元素</h3>
<p>只取出最大的元素（堆顶）</p>
<ol>
<li>把堆中最后的元素放到堆顶（数组末尾放到开头），并删除末尾的元素，当前满足了完全二叉树的性质</li>
<li>当前这个元素不满足大于其它节点的性质，需要将其下沉，把它和他的左右子节点做比较，把左右节点中最大的元素和它做交换（当然也需要满足比它大）</li>
</ol>
<p>堆的复杂度分析
插入取出都是 O(log(n))
<img  src="/_astro/%E5%A0%86%E7%9A%84%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90.C5GAOb4b_Z1ai5Xr.webp" alt="img.png" width="1528" height="851" loading="lazy" decoding="async"></p>
<h3 id="取出最大元素后放入一个新的元素replace">取出最大元素后，放入一个新的元素（replace）</h3>
<p>实现：
可以直接将队中最大的元素替换后 sift down</p>
<h3 id="将任意数组整理成堆的形状heapify">将任意数组整理成堆的形状（heapify）</h3>
<p>从最后一个非叶子节点开始（图中的22）向前 sift down
<img  src="/_astro/heapify1.BKscioX2_DYcwf.webp" alt="img.png" width="1552" height="803" loading="lazy" decoding="async"></p>
<p>这个节点的计算方式是，最后一个节点（数组末尾 index=size-1）的父级节点（(index-1)/2）
<img  src="/_astro/heapify2.CVJ7vySI_PuGjJ.webp" alt="img.png" width="1412" height="653" loading="lazy" decoding="async"></p>
<h3 id="堆原地排序">堆原地排序</h3>
<ol>
<li>堆中最大的元素在数组首位，将其和数组末尾元素交换位置
此时，数组的前半部分（最后一个元素之前）不满足最大堆性质
<img  src="/_astro/%E5%A0%86%E5%8E%9F%E5%9C%B0%E6%8E%92%E5%BA%8F.ClLFSarp_ZAO6Rg.webp" alt="img.png" width="1512" height="650" loading="lazy" decoding="async"></li>
<li>把现在开头元素 sift down， 这样前半部分又是最大堆
<img  src="/_astro/%E5%A0%86%E5%8E%9F%E5%9C%B0%E6%8E%92%E5%BA%8F2.Ds8eSxCV_Z1Vv4SI.webp" alt="img_1.png" width="1471" height="563" loading="lazy" decoding="async"></li>
<li>持续这个过程</li>
</ol>
<p>由于没有开辟新空间，此时空间复杂度 O(1)</p>
<h3 id="优先队列解决-topk-问题">优先队列解决 topK 问题</h3>
<p>在 N 个元素中选出最大的 K 个元素
在 N 个元素中选出最小的 K 个元素</p>
<p>select K 问题 — 找出第K大的元素（快速排序中处理过）</p>
<p><img  src="/_astro/topK.DxP_Holy_Bb6rt.webp" alt="img.png" width="979" height="934" loading="lazy" decoding="async">
<img  src="/_astro/topK2.DFn2Deq7_19iimo.webp" alt="img.png" width="1478" height="834" loading="lazy" decoding="async"></p>
<p>使用快排思想和使用优先队列思想解决 topK、selectK 问题比较：
快排：时间 O(n) 空间O(1)
优先队列：时间 O(nlogk) 空间O(k)
优先队列的优势：不需要一次性知道所有数据（数据流、极大规模数据）
<img  src="/_astro/topK3.CWGFxgeV_wlxzh.webp" alt="img.png" width="1272" height="806" loading="lazy" decoding="async"></p>
<h2 id="冒泡排序法">冒泡排序法</h2>
<p>比较相邻的两个元素（j, j+1）如果j大于j+1则交换两者位置，一直比较到末尾</p>
<p>算法复杂度 O(n^2)</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--1:#24292E"><span style="--0:#8BE9FD;--0fs:italic">E</span><span style="--0:#F8F8F2"> extends </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span></span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E">E</span><span style="--0:#FF79C6;--1:#BF3441">>></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">sort</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] data) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; i </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> data.length; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> j </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; j </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> data.length </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">; j</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (data[j].</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(data[j </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">]) </span><span style="--0:#FF79C6;--1:#BF3441">></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#50FA7B;--1:#6F42C1">swap</span><span style="--0:#F8F8F2;--1:#24292E">(data, j, j </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="public static <E extends Comparable<E>> void sort(E[] data) {    for (int i = 0; i + 1 < data.length; i++) {        for (int j = 0; j < data.length - i - 1; j++) {            if (data[j].compareTo(data[j + 1]) > 0) {                swap(data, j, j + 1);            }        }    }}"><div></div></button></div></figure></div>
<p>优化一，如果已经是有序的了，就不需要继续后面的冒泡了（全程没有交换位置）</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--1:#24292E"><span style="--0:#8BE9FD;--0fs:italic">E</span><span style="--0:#F8F8F2"> extends </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span></span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E">E</span><span style="--0:#FF79C6;--1:#BF3441">>></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">sort2</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] data) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; i </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> data.length; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">boolean</span><span style="--0:#F8F8F2;--1:#24292E"> isSwapped </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">false</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> j </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; j </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> data.length </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">; j</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (data[j].</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(data[j </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">]) </span><span style="--0:#FF79C6;--1:#BF3441">></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#50FA7B;--1:#6F42C1">swap</span><span style="--0:#F8F8F2;--1:#24292E">(data, j, j </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                </span></span><span style="--0:#F8F8F2;--1:#24292E">isSwapped </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">true</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#FF79C6;--1:#BF3441">!</span><span style="--0:#F8F8F2;--1:#24292E">isSwapped) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">break</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="public static <E extends Comparable<E>> void sort2(E[] data) {    for (int i = 0; i + 1 < data.length; i++) {        boolean isSwapped = false;        for (int j = 0; j < data.length - i - 1; j++) {            if (data[j].compareTo(data[j + 1]) > 0) {                swap(data, j, j + 1);                isSwapped = true;            }        }        if (!isSwapped) {            break;        }    }}"><div></div></button></div></figure></div>
<p>优化二，冒泡后，如果后面几个元素没有交换位置，说明它已经是有序的了，记录最后交换的索引，下轮冒泡跳过这些有序的值</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--1:#24292E"><span style="--0:#8BE9FD;--0fs:italic">E</span><span style="--0:#F8F8F2"> extends </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span></span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E">E</span><span style="--0:#FF79C6;--1:#BF3441">>></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">sort3</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] data) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; i </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> data.length; ) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> lastSwappedIndex </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> j </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; j </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> data.length </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">; j</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (data[j].</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(data[j </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">]) </span><span style="--0:#FF79C6;--1:#BF3441">></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#50FA7B;--1:#6F42C1">swap</span><span style="--0:#F8F8F2;--1:#24292E">(data, j, j </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                </span></span><span style="--0:#F8F8F2;--1:#24292E">lastSwappedIndex </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> j </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#96A1C2;--1:#616972">//            if (lastSwappedIndex == 0) {</span></div></div><div class="ec-line"><div class="code"><span style="--0:#96A1C2;--1:#616972">//                // 没有发生过交换，数组有序</span></div></div><div class="ec-line"><div class="code"><span style="--0:#96A1C2;--1:#616972">//                break;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#96A1C2;--1:#616972">//            }</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> data.length </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> lastSwappedIndex;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="public static <E extends Comparable<E>> void sort3(E[] data) {    for (int i = 0; i + 1 < data.length; ) {        int lastSwappedIndex = 0;        for (int j = 0; j < data.length - i - 1; j++) {            if (data[j].compareTo(data[j + 1]) > 0) {                swap(data, j, j + 1);                lastSwappedIndex = j + 1;            }        }//            if (lastSwappedIndex == 0) {//                // 没有发生过交换，数组有序//                break;//            }        i = data.length - lastSwappedIndex;    }}"><div></div></button></div></figure></div>
<h2 id="希尔排序法">希尔排序法</h2>
<p>插入排序：从索引 1 开始，和它前面的元素比较，如果大于就不动，如果小于则交换位置
越有序的元素交换次数越少，完全有序的比较一遍就可以了，复杂度 O(n)</p>
<p>基本思想：让数据越来越有序</p>
<p>冒泡排序法，相邻两个元素如果是逆序对就交换位置</p>
<p>希尔排序法：不能只处理相邻的逆序对</p>
<p>图中两个颜色一样的分为一组
每组索引相差4，分别对每组进行插入排序（如果左大于右就交换位置）</p>
<p><img  src="/_astro/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F.BLlLB-Ru_EvOJs.webp" alt="img.png" width="1122" height="702" loading="lazy" decoding="async"></p>
<p>一轮希尔排序后</p>
<p><img  src="/_astro/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F2.D_upCs6d_ZxVQw6.webp" alt="img.png" width="1061" height="690" loading="lazy" decoding="async"></p>
<p>把整个数组按距离为 2 进行分组</p>
<p><img  src="/_astro/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F3.jjccj3CT_25m8zE.webp" alt="img.png" width="1056" height="680" loading="lazy" decoding="async"></p>
<p>排序后</p>
<p><img  src="/_astro/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F4.BpoOkaSb_VXzIl.webp" alt="img.png" width="1052" height="684" loading="lazy" decoding="async"></p>
<p>按间隔为 1 进行分组，就是数组本身，进行插入排序</p>
<p><img  src="/_astro/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F5.DThXmDmE_UPuR9.webp" alt="img.png" width="866" height="769" loading="lazy" decoding="async"></p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--1:#24292E"><span style="--0:#8BE9FD;--0fs:italic">E</span><span style="--0:#F8F8F2"> extends </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span></span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E">E</span><span style="--0:#FF79C6;--1:#BF3441">>></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">sort</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] data) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> h </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> data.length </span><span style="--0:#FF79C6;--1:#BF3441">/</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">2</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">while</span><span style="--0:#F8F8F2;--1:#24292E"> (h </span><span style="--0:#FF79C6;--1:#BF3441">>=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> start </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; start </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> h; start</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#96A1C2;--1:#616972">// 对 data[start, start+h, start+2h, start+3h, ...] 进行插入排序</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> start </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> h; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> data.length; i </span><span style="--0:#FF79C6;--1:#BF3441">+=</span><span style="--0:#F8F8F2;--1:#24292E"> h) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#24292E">                </span></span><span style="--0:#8BE9FD;--0fs:italic;--1:#24292E">E</span><span style="--0:#F8F8F2;--1:#24292E"> t </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> data[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> j;</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (j </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> i; j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> h </span><span style="--0:#FF79C6;--1:#BF3441">>=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x26;&#x26;</span><span style="--0:#F8F8F2;--1:#24292E"> t.</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(data[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> h]) </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; j </span><span style="--0:#FF79C6;--1:#BF3441">-=</span><span style="--0:#F8F8F2;--1:#24292E"> h) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                    </span></span><span style="--0:#F8F8F2;--1:#24292E">data[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> data[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> h];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                </span></span><span style="--0:#F8F8F2;--1:#24292E">data[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> t;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">h </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> h </span><span style="--0:#FF79C6;--1:#BF3441">/</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">2</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="public static <E extends Comparable<E>> void sort(E[] data) {    int h = data.length / 2;    while (h >= 1) {        for (int start = 0; start < h; start++) {            // 对 data[start, start+h, start+2h, start+3h, ...] 进行插入排序            for (int i = start + h; i < data.length; i += h) {                E t = data[i];                int j;                for (j = i; j - h >= 0 &#x26;&#x26; t.compareTo(data[j - h]) < 0; j -= h) {                    data[j] = data[j - h];                }                data[j] = t;            }        }        h = h / 2;    }}"><div></div></button></div></figure></div>
<p>希尔排序性能 分析
<img  src="/_astro/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F%E6%80%A7%E8%83%BD.Dm0NmqUM_WeJK6.webp" alt="img.png" width="1596" height="833" loading="lazy" decoding="async">
<img  src="/_astro/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F%E6%80%A7%E8%83%BD2.IQb1WO53_Z21Q9C1.webp" alt="img.png" width="1393" height="852" loading="lazy" decoding="async"></p>
<p>代码优化：不显式拆分子数组，每轮对前面间隔 h 元素做比较</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--1:#24292E"><span style="--0:#8BE9FD;--0fs:italic">E</span><span style="--0:#F8F8F2"> extends </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span></span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E">E</span><span style="--0:#FF79C6;--1:#BF3441">>></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">sort2</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] data) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> h </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> data.length </span><span style="--0:#FF79C6;--1:#BF3441">/</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">2</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">while</span><span style="--0:#F8F8F2;--1:#24292E"> (h </span><span style="--0:#FF79C6;--1:#BF3441">>=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#96A1C2;--1:#616972">// 对 data[h, n) 进行插入排序</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> h; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> data.length; i </span><span style="--0:#FF79C6;--1:#BF3441">+=</span><span style="--0:#F8F8F2;--1:#24292E"> h) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#24292E">            </span></span><span style="--0:#8BE9FD;--0fs:italic;--1:#24292E">E</span><span style="--0:#F8F8F2;--1:#24292E"> t </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> data[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> j;</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (j </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> i; j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> h </span><span style="--0:#FF79C6;--1:#BF3441">>=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x26;&#x26;</span><span style="--0:#F8F8F2;--1:#24292E"> t.</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(data[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> h]) </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; j </span><span style="--0:#FF79C6;--1:#BF3441">-=</span><span style="--0:#F8F8F2;--1:#24292E"> h) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                </span></span><span style="--0:#F8F8F2;--1:#24292E">data[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> data[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> h];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">data[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> t;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">h </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> h </span><span style="--0:#FF79C6;--1:#BF3441">/</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">2</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="public static <E extends Comparable<E>> void sort2(E[] data) {    int h = data.length / 2;    while (h >= 1) {        // 对 data[h, n) 进行插入排序        for (int i = h; i < data.length; i += h) {            E t = data[i];            int j;            for (j = i; j - h >= 0 &#x26;&#x26; t.compareTo(data[j - h]) < 0; j -= h) {                data[j] = data[j - h];            }            data[j] = t;        }        h = h / 2;    }}"><div></div></button></div></figure></div>
<h3 id="步长序列">步长序列</h3>
<p><img  src="/_astro/%E6%AD%A5%E9%95%BF%E5%BA%8F%E5%88%97.B_HyQK_t_mWpvQ.webp" alt="img.png" width="669" height="536" loading="lazy" decoding="async">
超参数</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">static</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--1:#24292E"><span style="--0:#8BE9FD;--0fs:italic">E</span><span style="--0:#F8F8F2"> extends </span><span style="--0:#8BE9FD;--0fs:italic">Comparable</span></span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E">E</span><span style="--0:#FF79C6;--1:#BF3441">>></span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">sort3</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">E</span><span style="--0:#F8F8F2;--1:#24292E">[] data) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> h </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">while</span><span style="--0:#F8F8F2;--1:#24292E"> (h </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> data.length) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">h </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> h </span><span style="--0:#FF79C6;--1:#BF3441">*</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">3</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#96A1C2;--1:#616972">// 1, 4, 13, 40</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">while</span><span style="--0:#F8F8F2;--1:#24292E"> (h </span><span style="--0:#FF79C6;--1:#BF3441">>=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#96A1C2;--1:#616972">// 对 data[h, n) 进行插入排序</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> h; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> data.length; i </span><span style="--0:#FF79C6;--1:#BF3441">+=</span><span style="--0:#F8F8F2;--1:#24292E"> h) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--1:#24292E">            </span></span><span style="--0:#8BE9FD;--0fs:italic;--1:#24292E">E</span><span style="--0:#F8F8F2;--1:#24292E"> t </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> data[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> j;</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (j </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> i; j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> h </span><span style="--0:#FF79C6;--1:#BF3441">>=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">&#x26;&#x26;</span><span style="--0:#F8F8F2;--1:#24292E"> t.</span><span style="--0:#50FA7B;--1:#6F42C1">compareTo</span><span style="--0:#F8F8F2;--1:#24292E">(data[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> h]) </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; j </span><span style="--0:#FF79C6;--1:#BF3441">-=</span><span style="--0:#F8F8F2;--1:#24292E"> h) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                </span></span><span style="--0:#F8F8F2;--1:#24292E">data[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> data[j </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> h];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">data[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> t;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">h </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> h </span><span style="--0:#FF79C6;--1:#BF3441">/</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">3</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="public static <E extends Comparable<E>> void sort3(E[] data) {    int h = 1;    while (h < data.length) {        h = h * 3 + 1;        // 1, 4, 13, 40    }    while (h >= 1) {        // 对 data[h, n) 进行插入排序        for (int i = h; i < data.length; i += h) {            E t = data[i];            int j;            for (j = i; j - h >= 0 &#x26;&#x26; t.compareTo(data[j - h]) < 0; j -= h) {                data[j] = data[j - h];            }            data[j] = t;        }        h = h / 3;    }}"><div></div></button></div></figure></div>
<h2 id="基于比较的排序算法总结">基于比较的排序算法总结</h2>
<p><img  src="/_astro/%E5%9F%BA%E4%BA%8E%E6%AF%94%E8%BE%83%E7%9A%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%93.CJJ8JStj_Z13xa2E.webp" alt="img.png" width="1083" height="814" loading="lazy" decoding="async">
<img  src="/_astro/%E5%9F%BA%E4%BA%8E%E6%AF%94%E8%BE%83%E7%9A%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%931.DNXybhif_18Kj8Q.webp" alt="img.png" width="1605" height="834" loading="lazy" decoding="async">
<img  src="/_astro/%E5%9F%BA%E4%BA%8E%E6%AF%94%E8%BE%83%E7%9A%84%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%80%BB%E7%BB%932.J15MYmLz_Z1Co84H.webp" alt="img.png" width="1543" height="866" loading="lazy" decoding="async"></p>
<h2 id="排序算法的稳定性">排序算法的稳定性</h2>
<p>排序算法的稳定性：排序前相等的两个元素，排序后相对位置不变</p>
<p><img  src="/_astro/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E7%A8%B3%E5%AE%9A%E6%80%A7.CjGD4Fxf_1n6mA5.webp" alt="img.png" width="1234" height="707" loading="lazy" decoding="async">
<img  src="/_astro/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E7%A8%B3%E5%AE%9A%E6%80%A72.uzbcSBZ9_1s3Uwl.webp" alt="img.png" width="1238" height="837" loading="lazy" decoding="async"></p>
<p>选择排序是不稳定的
<img  src="/_astro/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E7%A8%B3%E5%AE%9A%E6%80%A7.BvpgmXau_jkfaz.webp" alt="img.png" width="827" height="520" loading="lazy" decoding="async">
<img  src="/_astro/%E9%80%89%E6%8B%A9%E6%8E%92%E5%BA%8F%E7%A8%B3%E5%AE%9A%E6%80%A72.BzRTKoLO_Z17Msrc.webp" alt="img.png" width="825" height="541" loading="lazy" decoding="async"></p>
<p>插入排序法是稳定的（依赖具体实现）
<img  src="/_astro/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F%E7%A8%B3%E5%AE%9A%E6%80%A7.D56QhBN-_1qv3On.webp" alt="img.png" width="845" height="688" loading="lazy" decoding="async">
<img  src="/_astro/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F%E7%A8%B3%E5%AE%9A%E6%80%A72.fpxhKycj_1guOsO.webp" alt="img.png" width="1049" height="839" loading="lazy" decoding="async"></p>
<p>希尔排序是不稳定的
<img  src="/_astro/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F%E7%A8%B3%E5%AE%9A%E6%80%A7.fRUnq_0G_Z22RrtW.webp" alt="img.png" width="714" height="545" loading="lazy" decoding="async">
<img  src="/_astro/%E5%B8%8C%E5%B0%94%E6%8E%92%E5%BA%8F%E7%A8%B3%E5%AE%9A%E6%80%A71.D5g6I5Gx_Z2duS5V.webp" alt="img.png" width="713" height="535" loading="lazy" decoding="async"></p>
<p>冒泡排序法是稳定的
<img  src="/_astro/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F%E7%A8%B3%E5%AE%9A%E6%80%A7.DJ8OJSux_27RIdP.webp" alt="img.png" width="881" height="747" loading="lazy" decoding="async">
<img  src="/_astro/%E5%86%92%E6%B3%A1%E6%8E%92%E5%BA%8F%E7%A8%B3%E5%AE%9A%E6%80%A71.DIgs7PEH_Zusmpf.webp" alt="img.png" width="1071" height="849" loading="lazy" decoding="async"></p>
<p><img  src="/_astro/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%A8%B3%E5%AE%9A%E6%80%A73.BS40VdyO_ZCJKMV.webp" alt="img.png" width="1348" height="722" loading="lazy" decoding="async"></p>
<p><img  src="/_astro/%E5%A0%86%E6%8E%92%E5%BA%8F%E7%A8%B3%E5%AE%9A%E6%80%A7.DMPe42WI_Z13GsKB.webp" alt="img.png" width="1160" height="730" loading="lazy" decoding="async">
<img  src="/_astro/%E5%A0%86%E6%8E%92%E5%BA%8F%E7%A8%B3%E5%AE%9A%E6%80%A72.CzCSzJUm_Z1hq4xf.webp" alt="img.png" width="1139" height="732" loading="lazy" decoding="async"></p>
<p><img  src="/_astro/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F%E7%A8%B3%E5%AE%9A%E6%80%A7.C0MyQflH_lUezU.webp" alt="img.png" width="1056" height="731" loading="lazy" decoding="async">
<img  src="/_astro/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F%E7%A8%B3%E5%AE%9A%E6%80%A72.DAU7r2Oa_ZLKSyM.webp" alt="img.png" width="1433" height="853" loading="lazy" decoding="async">
<img  src="/_astro/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E7%A8%B3%E5%AE%9A%E6%80%A74.B4WnK23f_ZEs7a5.webp" alt="img.png" width="1198" height="733" loading="lazy" decoding="async">
<img  src="/_astro/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E7%A8%B3%E5%AE%9A%E6%80%A75.Do6SgmAX_ZKWHdb.webp" alt="img.png" width="855" height="745" loading="lazy" decoding="async"></p>
<h2 id="线段树区间树">线段树（区间树）</h2>
<p><img  src="/_astro/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E7%BA%BF%E6%AE%B5%E6%A0%91.CBVxVA1k_Z27CYuV.webp" alt="img.png" width="1414" height="850" loading="lazy" decoding="async">
<img  src="/_astro/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E7%BA%BF%E6%AE%B5%E6%A0%912.CLqitzPg_ZhbXl2.webp" alt="img.png" width="1137" height="782" loading="lazy" decoding="async">
<img  src="/_astro/%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E7%BA%BF%E6%AE%B5%E6%A0%913.D3_Cly09_Z1kjT1Y.webp" alt="img.png" width="1415" height="712" loading="lazy" decoding="async">
这类问题，数组复杂度 O(n) 线段树 O(log(n))</p>
<p>对于二叉树中的每一个节点，存储的是一个线段/区间的信息
<img  src="/_astro/%E7%BA%BF%E6%AE%B5%E6%A0%91.CIVhxG0i_17rRxv.webp" alt="img.png" width="1483" height="832" loading="lazy" decoding="async"></p>
<p>平衡二叉树，对于整棵树来说，最大深度和最小深度的差最多为 1
<img  src="/_astro/%E7%BA%BF%E6%AE%B5%E6%A0%912.redVy3LL_ZFse9A.webp" alt="img.png" width="1588" height="877" loading="lazy" decoding="async"></p>
<p>如果区间有 n 个元素，数组表示需要多少节点？
<img  src="/_astro/%E7%BA%BF%E6%AE%B5%E6%A0%913.DQrl2uzR_Y8wTo.webp" alt="img.png" width="1497" height="862" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%BF%E6%AE%B5%E6%A0%914.xaWdd34E_Z1bHRD.webp" alt="img.png" width="1578" height="863" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%BF%E6%AE%B5%E6%A0%915.CFq3nI6M_Z1JK4fb.webp" alt="img.png" width="989" height="821" loading="lazy" decoding="async">
最坏情况会有一半的空间是浪费的
<img  src="/_astro/%E7%BA%BF%E6%AE%B5%E6%A0%916.D833wpRy_ZS5rfv.webp" alt="img.png" width="1248" height="772" loading="lazy" decoding="async"></p>
<p>查询 <code>[2, 5]</code>
<img  src="/_astro/%E7%BA%BF%E6%AE%B5%E6%A0%917.CeNE_2zu_ZAuyPO.webp" alt="img.png" width="1536" height="656" loading="lazy" decoding="async"></p>
<p>LeetCode 303 和 307 号问题</p>
<h2 id="trie-字典树-前缀树">Trie 字典树 前缀树</h2>
<p><img  src="/_astro/Trie.qOlUMTpy_Z1T3SO6.webp" alt="img.png" width="1495" height="852" loading="lazy" decoding="async">
<img  src="/_astro/Trie2.ChtlbSYO_ELD7x.webp" alt="img.png" width="892" height="876" loading="lazy" decoding="async">
<img  src="/_astro/Trie3.DFBqEPTV_ZdAmyc.webp" alt="img.png" width="1585" height="861" loading="lazy" decoding="async"></p>
<h2 id="并查集-union-find">并查集 Union Find</h2>
<p>连接问题
网络节点中的连接状态</p>
<ul>
<li>网络是一个抽象的概念：用户之间形成的网络
数学中的集合类实现</li>
</ul>
<p><img  src="/_astro/UnionFind.CaZWrDCT_Zz6HLx.webp" alt="img.png" width="950" height="666" loading="lazy" decoding="async">
并查集内部为每个数据赋予一个编号(下图 0-9)
对于每一个元素，并查集存储了它所属集合的id(下图下半部分)
<img  src="/_astro/UnionFind2.3Y-x9gHL_ZS1dNq.webp" alt="img.png" width="1267" height="596" loading="lazy" decoding="async">
上图 0-4 属于一个集合，5-9属于另一个集合
编号 0 和 编号 1 也就是可连接的
<img  src="/_astro/UnionFind3.-ftkhhmS_1m4kVd.webp" alt="img.png" width="1293" height="636" loading="lazy" decoding="async"></p>
<p>并查集需要实现的接口</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#96A1C2;--1:#616972">// 查看元素 p 和元素 q 是否属于同一个集合</span></div></div><div class="ec-line"><div class="code"><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">boolean</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">isConnected</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> p, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> q);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#96A1C2;--1:#616972">// 把 p 和 q 所在的集合连接起来</span></div></div><div class="ec-line"><div class="code"><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">unionElements</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> p, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> q);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// 查看元素 p 和元素 q 是否属于同一个集合boolean isConnected(int p, int q);// 把 p 和 q 所在的集合连接起来void unionElements(int p, int q);"><div></div></button></div></figure></div>
<p>使用数组实现，数组存储节点所在的集合编号
那么，isConnected 通过下标比较集合编号即可，复杂度是 O(1)
unionElements 需要遍历整个数组，把 p 所在的下标改为 q，复杂度是 O(n)</p>
<p>把每一个元素看作是节点，
在一个集合中，节点 3 指向 节点 2， 节点 2 作为树的根节点，指向自己
向这个集合添加元素，指向根节点即可
<img  src="/_astro/UnionFind4.Dx1AI9iw_4ns7W.webp" alt="img.png" width="1431" height="829" loading="lazy" decoding="async">
合并两个集合，把集合根节点，指向另一个集合的根节点
<img  src="/_astro/UnionFind5.DH4FPl-9_Zb1sgl.webp" alt="img.png" width="1436" height="822" loading="lazy" decoding="async"></p>
<p>在数组中，初始时候，每个元素指向它的父节点
<img  src="/_astro/UnionFind6.Dpe8uLsT_AeVIF.webp" alt="img.png" width="1521" height="815" loading="lazy" decoding="async">
Union(4, 3), 让节点 4 指向节点 3，在数组中，把 4 所在位置值修改为 3 存储的值
<img  src="/_astro/UnionFind7.CERmhMi0_1OWvJm.webp" alt="img.png" width="1515" height="836" loading="lazy" decoding="async">
Union(3， 8)
<img  src="/_astro/UnionFind8.ZFOew6ZI_l9CWj.webp" alt="img.png" width="1554" height="842" loading="lazy" decoding="async">
<img  src="/_astro/UnionFind9.RmdHNttY_Z1L8REw.webp" alt="img.png" width="1505" height="825" loading="lazy" decoding="async"></p>
<h3 id="基于-size-的优化">基于 size 的优化</h3>
<p>如果我们在合并时，单纯让 p 所在根节点指向 q 所在根节点，
那么极端情况下有可能会形成链表
优化思路：记录每个节点的树的节点数量，当合并时判断，把节点少的合并到节点多的树上</p>
<p>UnionFind1: 3.782069081 s
UnionFind2: 5.547484642 s
UnionFind3: 0.009774763 s</p>
<h3 id="基于-rank-的优化">基于 rank 的优化</h3>
<p><img  src="/_astro/UnionFind10.DXqCjLk8_1vvKGD.webp" alt="img.png" width="1306" height="828" loading="lazy" decoding="async">
如果基于 size 优化，合并后，节点 8 指向 节点多的根节点 7
<img  src="/_astro/UnionFind11.ChuAJ7kB_ZQT3cI.webp" alt="img.png" width="1324" height="825" loading="lazy" decoding="async">
此时树的深度为 4，更合理的合并应该是让 节点7指向节点 8
<img  src="/_astro/UnionFind12.24mxmqP8_ZJwAvz.webp" alt="img.png" width="1248" height="813" loading="lazy" decoding="async"></p>
<p><code>rank[i]</code> 表示根节点为 i 的树的高度</p>
<h3 id="路径压缩">路径压缩</h3>
<p><img  src="/_astro/UnionFind13.DpKYdp4s_sfm4U.webp" alt="img.png" width="1480" height="845" loading="lazy" decoding="async"></p>
<p>执行 find 时候进行压缩
<img  src="/_astro/UnionFind14.CvLCiGfj_Z1bTh8l.webp" alt="img.png" width="938" height="839" loading="lazy" decoding="async">
遍历过程中执行 <code>parent[p] = parent[parent[p]]</code>,
把当前节点，指向它父节点的父节点
<img  src="/_astro/UnionFind15.ChNJd1pT_ZG3OJt.webp" alt="img.png" width="1228" height="833" loading="lazy" decoding="async">
<img  src="/_astro/UnionFind16.CU3yd2mR_Z2bSprA.webp" alt="img.png" width="1310" height="819" loading="lazy" decoding="async">
<img  src="/_astro/UnionFind17.BHGn_ML9_17vP45.webp" alt="img.png" width="1436" height="867" loading="lazy" decoding="async"></p>
<p>时间复杂度
<img  src="/_astro/UnionFind18.DcMsi1y6_ZCHJgu.webp" alt="img.png" width="1136" height="789" loading="lazy" decoding="async"></p>
<h2 id="avl-树">AVL 树</h2>
<p>平衡二叉树：
对于任意一个节点，左子树和右子树的高度差不能超过 1
平衡二叉树的高度和节点数量之间的关系也是O(log(n))的
标注节点的高度 — 左右子树中最大高度加一
<img  src="/_astro/AVL.Bh2ZMzWh_Qo1Dq.webp" alt="img.png" width="1488" height="855" loading="lazy" decoding="async">
计算平衡因子 — 左子树的高度减去右子树的高度
（如果平衡因子（高度差）大于等于 2，二叉树就不是平衡二叉树了）
<img  src="/_astro/AVL2.B4e0xmgn_63wxu.webp" alt="img.png" width="1576" height="892" loading="lazy" decoding="async"></p>
<h3 id="avl-添加元素后如何维持平衡">AVL 添加元素后，如何维持平衡</h3>
<p>每添加一个节点，计算其父节点的平衡因子，判断是否打破平衡
<img  src="/_astro/AVL3.li1A2W9U_2wXbcs.webp" alt="img.png" width="1601" height="859" loading="lazy" decoding="async">
<img  src="/_astro/AVL4.BckiBIQr_Z1Apmpt.webp" alt="img.png" width="1484" height="890" loading="lazy" decoding="async">
<strong>右旋转</strong>
<img  src="/_astro/AVL5.DnK1ZtsB_ZJCiws.webp" alt="img.png" width="1185" height="870" loading="lazy" decoding="async">
让 x 的右子树连接上 y (x.right = y)
<img  src="/_astro/AVL6.oCpVT8H-_ZGITxC.webp" alt="img.png" width="1584" height="848" loading="lazy" decoding="async">
把 y 的左子树设置为 T3 (x.left = T3)
<img  src="/_astro/AVL7.DUkkJvL8_ZxLWoU.webp" alt="img.png" width="1463" height="807" loading="lazy" decoding="async">
右旋转后的树满足平衡二叉树和二分搜索树的性质
<img  src="/_astro/AVL8.DV7nxogx_1tkJtH.webp" alt="img.png" width="1626" height="871" loading="lazy" decoding="async"></p>
<p><strong>左旋转</strong>
插入的元素在不平衡的节点的右侧的右侧
<img  src="/_astro/AVL9.DWMC6ES4_W4vAY.webp" alt="img.png" width="1281" height="848" loading="lazy" decoding="async">
x.left = y
<img  src="/_astro/AVL10.DR5l4BaF_1z3tBY.webp" alt="img.png" width="1497" height="851" loading="lazy" decoding="async">
y.right = T3
<img  src="/_astro/AVL11.vPVlx_hc_ZggbrF.webp" alt="img.png" width="1579" height="813" loading="lazy" decoding="async"></p>
<p>前面讨论的可以叫做 LL, RR
<img  src="/_astro/AVL13.bD3qBHIX_X9MJy.webp" alt="img.png" width="1504" height="841" loading="lazy" decoding="async"></p>
<p><strong>LR</strong>
插入的元素在不平衡的节点的左侧的右侧
<img  src="/_astro/AVL12.BaiTyD6E_1NPzdO.webp" alt="img.png" width="1605" height="894" loading="lazy" decoding="async">
首先对 x 进行左旋转
<img  src="/_astro/AVL14.Cc6q6V76_1pdEky.webp" alt="img.png" width="1018" height="797" loading="lazy" decoding="async">
转化成了 LL 的情况
<img  src="/_astro/AVL15.C0G06jBP_I22h7.webp" alt="img.png" width="1094" height="836" loading="lazy" decoding="async"></p>
<p><strong>RL</strong>
插入的元素在不平衡的节点的右侧的左侧
首先对 x 进行右旋转
<img  src="/_astro/AVL16.BIrrALK-_Z21eAFK.webp" alt="img.png" width="1171" height="837" loading="lazy" decoding="async">
转化成了 RR 的情况
<img  src="/_astro/AVL17.DYS3oAKl_Z1qsNld.webp" alt="img.png" width="1293" height="787" loading="lazy" decoding="async"></p>
<h2 id="2-3-树">2-3 树</h2>
<p>满足二分搜索树的基本性质（对任意节点，大于左节点，小于右节点，对于有两个元素的节点同样，左 &#x3C; 根1 &#x3C; 中 &#x3C; 根2 &#x3C; 右）
节点可以存放一个元素，或者两个元素
<img  src="/_astro/2-3%E6%A0%91.Cvml56DO_2kqMRJ.webp" alt="img.png" width="1014" height="834" loading="lazy" decoding="async">
2-3 树是一颗绝对平衡的树 （从根节点到任意一个叶子节点，所经过的节点数量一定是相同的）
<img  src="/_astro/2-3%E6%A0%912.DA-zNKlU_ZxGfbS.webp" alt="img.png" width="959" height="687" loading="lazy" decoding="async"></p>
<h3 id="2-3-树如何维护绝对的平衡">2-3 树如何维护绝对的平衡</h3>
<p>向，单节点 42 添加 37，本应添加到左子树，为满足绝对平衡性质，融合为单节点
<img  src="/_astro/2-3%E6%A0%913.Diff-CxT_2oTWGv.webp" alt="img.png" width="366" height="303" loading="lazy" decoding="async">
再添加节点 12，不能添加到空节点，先融合
<img  src="/_astro/2-3%E6%A0%914.DUlhvTXa_1q39Ar.webp" alt="img.png" width="467" height="325" loading="lazy" decoding="async">
再分裂
<img  src="/_astro/2-3%E6%A0%915.BdsnB9xh_Z1EV3Sc.webp" alt="img.png" width="633" height="500" loading="lazy" decoding="async">
再添加节点 18，本应添加到 12 右子树，12 右子树是空，不会添加，先和 12 融合
<img  src="/_astro/2-3%E6%A0%916.DR0J3W1B_ZYY51r.webp" alt="img.png" width="661" height="493" loading="lazy" decoding="async">
添加 6，先融合
<img  src="/_astro/2-3%E6%A0%917.tQ0piY9o_Z2ajhSl.webp" alt="img.png" width="694" height="490" loading="lazy" decoding="async">
如果这样拆解就不绝对平衡了
<img  src="/_astro/2-3%E6%A0%918.B_pjXqmf_1vuAnF.webp" alt="img.png" width="691" height="626" loading="lazy" decoding="async">
应该把中间节点向父节点融合，如果父亲节点只有一个元素，直接融合即可
<img  src="/_astro/2-3%E6%A0%919.BzejIXm8_Ic7JW.webp" alt="img.png" width="615" height="504" loading="lazy" decoding="async">
插入 11
<img  src="/_astro/2-3%E6%A0%9110.Di5krwKF_sPgEb.webp" alt="img.png" width="699" height="496" loading="lazy" decoding="async">
插入 5
<img  src="/_astro/2-3%E6%A0%9111.DYmzt86D_22JwP4.webp" alt="img.png" width="732" height="476" loading="lazy" decoding="async">
中间节点向父节点融合，但是现在父节点有两个元素了
<img  src="/_astro/2-3%E6%A0%9112.NRH34N_V_Z1iHpSJ.webp" alt="img.png" width="766" height="597" loading="lazy" decoding="async">
依旧融合
<img  src="/_astro/2-3%E6%A0%9113.DKOrj8zl_ZgJpLv.webp" alt="img.png" width="814" height="501" loading="lazy" decoding="async">
分裂父节点，它没有父节点了，不需要向上融合了
<img  src="/_astro/2-3%E6%A0%9114.DEZP8OV9_Z1GUotq.webp" alt="img.png" width="814" height="666" loading="lazy" decoding="async"></p>
<p>小结
如果插入2-节点
<img  src="/_astro/2-3%E6%A0%9115.CwXZxj7z_1X3KPP.webp" alt="img.png" width="826" height="601" loading="lazy" decoding="async">
如果插入3-节点，父节点为2-节点
<img  src="/_astro/2-3%E6%A0%9116.DmL1bmRU_1xKwwD.webp" alt="img.png" width="1461" height="793" loading="lazy" decoding="async">
<img  src="/_astro/2-3%E6%A0%9117.Bi1oKZKI_2p2IcG.webp" alt="img.png" width="1585" height="830" loading="lazy" decoding="async">
<img  src="/_astro/2-3%E6%A0%9118.BK7HcxKL_Ab46a.webp" alt="img.png" width="1545" height="839" loading="lazy" decoding="async">
如果插入3-节点，父节点为3-节点
<img  src="/_astro/2-3%E6%A0%9119.BwwIHpxw_9bE03.webp" alt="img.png" width="1634" height="734" loading="lazy" decoding="async">
<img  src="/_astro/2-3%E6%A0%9120.CgWHIJt6_Z1YkuXy.webp" alt="img.png" width="1635" height="840" loading="lazy" decoding="async"></p>
<h2 id="红黑树">红黑树</h2>
<h3 id="红黑树和2-3树的等价性">红黑树和2-3树的等价性</h3>
<p>2-3树拆分成二分搜索树，可以这样等价
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%91.B-qBRWus_1UCBaT.webp" alt="img.png" width="1408" height="810" loading="lazy" decoding="async">
使用红色节点来表示 b和c之间这个特殊的关系
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%912.DU3apu92_1nKXBk.webp" alt="img.png" width="1530" height="848" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%913.CXdJ9b1P_Y8rEB.webp" alt="img.png" width="1459" height="852" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%914.DWqhyd5f_Z1umKBV.webp" alt="img.png" width="1574" height="655" loading="lazy" decoding="async"></p>
<p><img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%915.Bc1hfYym_1DKD8H.webp" alt="img.png" width="1447" height="820" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%916.D_97KCdo_ZXR5zr.webp" alt="img.png" width="1553" height="838" loading="lazy" decoding="async"></p>
<h3 id="红黑树添加元素">红黑树添加元素</h3>
<p>首次添加是红色的（2-3树临时融合进子节点）
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%917.BHmmGMS9_29z8AE.webp" alt="img.png" width="812" height="440" loading="lazy" decoding="async">
根节点置黑
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%918.Cp-nDVF6_ZkN4SD.webp" alt="img.png" width="823" height="456" loading="lazy" decoding="async">
添加到黑节点左侧，直接插入即可
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%919.Cnfa6_29_Z18v3Qc.webp" alt="img.png" width="797" height="489" loading="lazy" decoding="async">
假设应该添加到右子树
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9110.Dhv-ukUn_Z222wjF.webp" alt="img.png" width="782" height="493" loading="lazy" decoding="async">
此时需要进行左旋转
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9111.PaseTE3__4ekE0.webp" alt="img.png" width="1203" height="527" loading="lazy" decoding="async">
左旋转过程
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9112.C8oS_MRk_Xkcaq.webp" alt="img.png" width="975" height="740" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9113.By56J7K__ZlPVdJ.webp" alt="img.png" width="1480" height="858" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9114.DfhoPxnH_fdENE.webp" alt="img.png" width="1481" height="760" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9115.DjxmFCgc_ZHnjtQ.webp" alt="img.png" width="1563" height="782" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9116.COYp6QEI_Z2qmFxJ.webp" alt="img.png" width="1527" height="797" loading="lazy" decoding="async"></p>
<p>添加节点 66，此时放在右边，此时相当于2-3树的临时4节点
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9117.B0Vnaqbu_Z6J9u9.webp" alt="img.png" width="1192" height="797" loading="lazy" decoding="async">
需要把它拆分为三个新节点，对应到红黑树，就是三个节点置黑
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9118.BCKC_Xi__ZXNWB0.webp" alt="img.png" width="1464" height="858" loading="lazy" decoding="async">
向上融合，根节点置红，这个过程也叫颜色翻转
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9119.CzorDbVU_Z2uSt2H.webp" alt="img.png" width="1561" height="868" loading="lazy" decoding="async"></p>
<p>添加节点 12，此时放在左边
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9120.BfmBdiE6_ZRxuYd.webp" alt="img.png" width="1455" height="883" loading="lazy" decoding="async">
拆分为三个节点，需要右旋转
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9121.DOYXJkw9_1lQuiz.webp" alt="img.png" width="1421" height="856" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9122.azsvDU9y_1VEeF6.webp" alt="img.png" width="1451" height="861" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9123.0rMK6Og2_Z2siJQr.webp" alt="img.png" width="1451" height="882" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9124.Ckn_J_E0_Z14XVgo.webp" alt="img.png" width="1528" height="875" loading="lazy" decoding="async">
颜色翻转
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9125.C8JejWaa_2t67f0.webp" alt="img.png" width="1472" height="865" loading="lazy" decoding="async"></p>
<p>添加节点 40
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9126.-PMjU1zY_Z2gxyqp.webp" alt="img.png" width="852" height="639" loading="lazy" decoding="async">
对节点 37 左旋转
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9127.Dj2Gl0Ss_1uXUOG.webp" alt="img.png" width="966" height="586" loading="lazy" decoding="async">
对节点 42 右旋转
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9128.muHY1Rwl_1nIkLi.webp" alt="img.png" width="874" height="566" loading="lazy" decoding="async">
颜色翻转
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9129.H-wy4YsM_z4rie.webp" alt="img.png" width="956" height="627" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9130.D0hZGy7C_ZYYK0l.webp" alt="img.png" width="1658" height="853" loading="lazy" decoding="async">
<img  src="/_astro/%E7%BA%A2%E9%BB%91%E6%A0%9131.DYJ9JgfW_Z2lRSnu.webp" alt="img.png" width="1175" height="807" loading="lazy" decoding="async"></p>
<h2 id="哈希表">哈希表</h2>
<h3 id="哈希函数的设计">哈希函数的设计</h3>
<p>大整数
一个简单的解决方法：模一个素数
<a href="https://planetmath.org/goodhashtableprimes">https://planetmath.org/goodhashtableprimes</a>
<img  src="/_astro/%E5%93%88%E5%B8%8C%E8%A1%A8.Ce9S_ouk_F38Bv.webp" alt="img.png" width="1390" height="818" loading="lazy" decoding="async"></p>
<p>浮点型
转成整型处理
<img  src="/_astro/%E5%93%88%E5%B8%8C%E8%A1%A82.D3emmuX7_yWm1p.webp" alt="img.png" width="1505" height="867" loading="lazy" decoding="async"></p>
<p>字符串 转成整型处理
<img  src="/_astro/%E5%93%88%E5%B8%8C%E8%A1%A83.BIt1nUkh_Z1Iv9r2.webp" alt="img.png" width="1485" height="780" loading="lazy" decoding="async">
<img  src="/_astro/%E5%93%88%E5%B8%8C%E8%A1%A84.BlY9lzSi_1Cee9J.webp" alt="img.png" width="1556" height="736" loading="lazy" decoding="async">
<img  src="/_astro/%E5%93%88%E5%B8%8C%E8%A1%A85.CTVAfLmz_HcLJI.webp" alt="img.png" width="1576" height="729" loading="lazy" decoding="async">
<img  src="/_astro/%E5%93%88%E5%B8%8C%E8%A1%A86.DDbMj4np_Z1vQd4N.webp" alt="img.png" width="1052" height="836" loading="lazy" decoding="async"></p>
<h3 id="哈希冲突的处理-链地址法">哈希冲突的处理 链地址法</h3>
<p><code>(hashCode(k1) &#x26; 0x7fffffff) % M</code>
(和 0x7fffffff 按位与相当于是把符号位设置成 0)
<img  src="/_astro/%E5%93%88%E5%B8%8C%E8%A1%A87.iG_huLQZ_Z1O13CY.webp" alt="img.png" width="1495" height="859" loading="lazy" decoding="async"></p>
<h3 id="哈希冲突的处理-开放地址法">哈希冲突的处理 开放地址法</h3>
<p>如果哈希重复，向后+1，寻找空闲位置写入（线性探测）
此外还有平方探测 +2 + 4 +8 +16
二次哈希 (使用另一个哈希函数再次哈希) + hash2(key)</p>
<p>扩容根据指标 — 负载率（已经存入元素/总容量）达到某个阈值（如0.75）扩容</p>
<p>更多冲突处理方式
再哈希法 Rehashing
Coalesced Hashing</p>
<h2 id="sqrt-分解">SQRT 分解</h2>
<p><img  src="/_astro/SQRT%E5%88%86%E8%A7%A3.C_7qsN47_Zr6b2i.webp" alt="img.png" width="982" height="783" loading="lazy" decoding="async">
<img  src="/_astro/SQRT%E5%88%86%E8%A7%A32.N6Gxrcpg_Z5T68F.webp" alt="img.png" width="1421" height="746" loading="lazy" decoding="async">
<img  src="/_astro/SQRT%E5%88%86%E8%A7%A33.Bx3LHk3x_1zEDhk.webp" alt="img.png" width="1613" height="853" loading="lazy" decoding="async"></p>
<h3 id="sqrt-分解区间查询">SQRT 分解区间查询</h3>
<p>基本思想：把一个含有 N 个元素的数组分成 √n 份
<img  src="/_astro/SQRT%E5%88%86%E8%A7%A34.DpYWr6sN_1AwGsE.webp" alt="img.png" width="1655" height="718" loading="lazy" decoding="async">
然后计算每一组的和
当查询的左右端点都在同一组时，比如查询 <code>sum[9..11]</code>, 9/4 = 2 11/4=2, 都在 2 组, 计算和即可遍历从 复杂度 O(sqrt(n))
<img  src="/_astro/SQRT%E5%88%86%E8%A7%A35.XOMekVFY_Zb2xck.webp" alt="img.png" width="1657" height="804" loading="lazy" decoding="async">
当查询的左右端点不在同一组时，比如查询 <code>sum[6...9]</code>, 端点在 1 组和 2 组，相连的，遍历从 6-9，求和，复杂度 O(sqrt(n))
<img  src="/_astro/SQRT%E5%88%86%E8%A7%A36.DkeVTKDk_1Y4GD4.webp" alt="img.png" width="1646" height="800" loading="lazy" decoding="async">
查询 <code>sum[3...16]</code>, sum(3) + 预处理的区间和 + sum(16)，复杂度 O(sqrt(n))
<img  src="/_astro/SQRT%E5%88%86%E8%A7%A37.BqZqNVhP_1LHdpf.webp" alt="img.png" width="1662" height="786" loading="lazy" decoding="async"></p>
<h3 id="sqrt-分解的单元素更新">SQRT 分解的单元素更新</h3>
<p>update: <code>data[6] = 66</code>
<img  src="/_astro/SQRT%E5%88%86%E8%A7%A38.BMi8GCxf_srLMi.webp" alt="img.png" width="1651" height="844" loading="lazy" decoding="async"></p>
<ol>
<li>直接更新原始数组中 6 索引值为 66</li>
<li><del>重新计算这个区间的和</del>，用原来的区间和 - 原来元素值 + 新的值
<img  src="/_astro/SQRT%E5%88%86%E8%A7%A39.CISKirv9_152TXG.webp" alt="img.png" width="1635" height="797" loading="lazy" decoding="async"></li>
</ol>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">package</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#F8F8F2;--0fs:italic;--0td:underline;--1:#B31D28;--1fs:italic">SQRT</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">import</span><span style="--0:#F8F8F2;--1:#24292E"> java.util.Arrays;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#96A1C2;--1:#616972">// LeetCode 303 307</span></div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">class</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--1:#6F42C1">NumberArray</span><span style="--0:#F8F8F2;--1:#24292E"> {</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">private</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[] data, blocks;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">private</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> N; </span><span style="--0:#96A1C2;--1:#616972">// 元素总数</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">private</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> B; </span><span style="--0:#96A1C2;--1:#616972">// 每组元素个数</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">private</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> Bn; </span><span style="--0:#96A1C2;--1:#616972">// 组数</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">NumberArray</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[] </span><span style="--0:#FFB86C;--0fs:italic;--1:#AE4B07">nums</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">N </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> nums.length;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (N </span><span style="--0:#FF79C6;--1:#BF3441">==</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">return</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">B </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">) Math.</span><span style="--0:#50FA7B;--1:#6F42C1">sqrt</span><span style="--0:#F8F8F2;--1:#24292E">(N);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">Bn </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> N </span><span style="--0:#FF79C6;--1:#BF3441">/</span><span style="--0:#F8F8F2;--1:#24292E"> B </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> (N </span><span style="--0:#FF79C6;--1:#BF3441">%</span><span style="--0:#F8F8F2;--1:#24292E"> B </span><span style="--0:#FF79C6;--1:#BF3441">==</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">?</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">:</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">data </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> Arrays.</span><span style="--0:#50FA7B;--1:#6F42C1">copyOf</span><span style="--0:#F8F8F2;--1:#24292E">(nums, N);</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">blocks </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--0fw:bold;--1:#BF3441">new</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[N];</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> N; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">blocks[i </span><span style="--0:#FF79C6;--1:#BF3441">/</span><span style="--0:#F8F8F2;--1:#24292E"> B] </span><span style="--0:#FF79C6;--1:#BF3441">+=</span><span style="--0:#F8F8F2;--1:#24292E"> data[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">sumRange</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FFB86C;--0fs:italic;--1:#AE4B07">x</span><span style="--0:#F8F8F2;--1:#24292E">, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FFB86C;--0fs:italic;--1:#AE4B07">y</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (x </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">||</span><span style="--0:#F8F8F2;--1:#24292E"> x </span><span style="--0:#FF79C6;--1:#BF3441">>=</span><span style="--0:#F8F8F2;--1:#24292E"> N </span><span style="--0:#FF79C6;--1:#BF3441">||</span><span style="--0:#F8F8F2;--1:#24292E"> y </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">||</span><span style="--0:#F8F8F2;--1:#24292E"> y </span><span style="--0:#FF79C6;--1:#BF3441">>=</span><span style="--0:#F8F8F2;--1:#24292E"> N </span><span style="--0:#FF79C6;--1:#BF3441">||</span><span style="--0:#F8F8F2;--1:#24292E"> x </span><span style="--0:#FF79C6;--1:#BF3441">></span><span style="--0:#F8F8F2;--1:#24292E"> y) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">return</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> bstart </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> x </span><span style="--0:#FF79C6;--1:#BF3441">/</span><span style="--0:#F8F8F2;--1:#24292E"> B;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> bend </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> x </span><span style="--0:#FF79C6;--1:#BF3441">%</span><span style="--0:#F8F8F2;--1:#24292E"> B;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> res </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (bstart </span><span style="--0:#FF79C6;--1:#BF3441">==</span><span style="--0:#F8F8F2;--1:#24292E"> bend) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> x; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;=</span><span style="--0:#F8F8F2;--1:#24292E"> y; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                </span></span><span style="--0:#F8F8F2;--1:#24292E">res </span><span style="--0:#FF79C6;--1:#BF3441">+=</span><span style="--0:#F8F8F2;--1:#24292E"> data[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">return</span><span style="--0:#F8F8F2;--1:#24292E"> res;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> x; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> (bstart </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">) </span><span style="--0:#FF79C6;--1:#BF3441">*</span><span style="--0:#F8F8F2;--1:#24292E"> B; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">res </span><span style="--0:#FF79C6;--1:#BF3441">+=</span><span style="--0:#F8F8F2;--1:#24292E"> data[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> b </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> bstart </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">; b </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> bend; b</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">res </span><span style="--0:#FF79C6;--1:#BF3441">+=</span><span style="--0:#F8F8F2;--1:#24292E"> blocks[b];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> bend </span><span style="--0:#FF79C6;--1:#BF3441">*</span><span style="--0:#F8F8F2;--1:#24292E"> B; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;=</span><span style="--0:#F8F8F2;--1:#24292E"> y; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">res </span><span style="--0:#FF79C6;--1:#BF3441">+=</span><span style="--0:#F8F8F2;--1:#24292E"> data[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">return</span><span style="--0:#F8F8F2;--1:#24292E"> res;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">update</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FFB86C;--0fs:italic;--1:#AE4B07">i</span><span style="--0:#F8F8F2;--1:#24292E">, </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FFB86C;--0fs:italic;--1:#AE4B07">val</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">if</span><span style="--0:#F8F8F2;--1:#24292E"> (i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">||</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">>=</span><span style="--0:#F8F8F2;--1:#24292E"> N) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">return</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> oldVal </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> data[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> b </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">/</span><span style="--0:#F8F8F2;--1:#24292E"> B;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">blocks[b] </span><span style="--0:#FF79C6;--1:#BF3441">-=</span><span style="--0:#F8F8F2;--1:#24292E"> oldVal;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">blocks[b] </span><span style="--0:#FF79C6;--1:#BF3441">+=</span><span style="--0:#F8F8F2;--1:#24292E"> val;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">data[i] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> val;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="package SQRT;import java.util.Arrays;// LeetCode 303 307public class NumberArray {    private int[] data, blocks;    private int N; // 元素总数    private int B; // 每组元素个数    private int Bn; // 组数    public NumberArray(int[] nums) {        N = nums.length;        if (N == 0) {            return;        }        B = (int) Math.sqrt(N);        Bn = N / B + (N % B == 0 ? 0 : 1);        data = Arrays.copyOf(nums, N);        blocks = new int[N];        for (int i = 0; i < N; i++) {            blocks[i / B] += data[i];        }    }    public int sumRange(int x, int y) {        if (x < 0 || x >= N || y < 0 || y >= N || x > y) {            return 0;        }        int bstart = x / B;        int bend = x % B;        int res = 0;        if (bstart == bend) {            for (int i = x; i <= y; i++) {                res += data[i];            }            return res;        }        for (int i = x; i < (bstart + 1) * B; i++) {            res += data[i];        }        for (int b = bstart + 1; b < bend; b++) {            res += blocks[b];        }        for (int i = bend * B; i <= y; i++) {            res += data[i];        }        return res;    }    public void update(int i, int val) {        if (i < 0 || i >= N) {            return;        }        int oldVal = data[i];        int b = i / B;        blocks[b] -= oldVal;        blocks[b] += val;        data[i] = val;    }}"><div></div></button></div></figure></div>
<h2 id="非比较排序算法">非比较排序算法</h2>
<p>不是元素之间不能比较，而是不借助 compareTo
主要应用于字符串排序</p>
<h3 id="计数排序">计数排序</h3>
<p><a href="https://leetcode.com/problems/sort-colors/description/">LeetCode 75: 颜色分类</a>
给定一个数组，只包含 0，1，2，对数组排序</p>
<p>之前使用<a href="#%E4%B8%89%E8%B7%AF%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F">三路快排</a>来实现</p>
<p>假设有 cnt0 个 0； cnt1 个 1； cnt2 个 2；</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">|--cnt0 个 0--|--cnt1 个 1--|--cnt2 个 2--|</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">|-------------|-------------|------------|</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">0           cnt0        cnt1+cnt2        n</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">[l, r1] 区间有 r1 - l + 1 个元素</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">[l, r2) 区间有 r2 - l 个元素</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="|--cnt0 个 0--|--cnt1 个 1--|--cnt2 个 2--||-------------|-------------|------------|0           cnt0        cnt1+cnt2        n[l, r1] 区间有 r1 - l + 1 个元素[l, r2) 区间有 r2 - l 个元素"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">setColors</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[] nums) {</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[] cnt </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--0fw:bold;--1:#BF3441">new</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[</span><span style="--0:#BD93F9;--1:#005CC5">3</span><span style="--0:#F8F8F2;--1:#24292E">];</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> num </span><span style="--0:#FF79C6;--1:#BF3441">:</span><span style="--0:#F8F8F2;--1:#24292E"> nums) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">cnt[num]</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#96A1C2;--1:#616972">// 对 nums 排序，前中后 0 1 2</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> cnt[</span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">]; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">nums[i] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> cnt[</span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">]; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> cnt[</span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">] </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> cnt[</span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">]; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">nums[i] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> cnt[</span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">] </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> cnt[</span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">]; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> cnt[</span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">] </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> cnt[</span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">] </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> cnt[</span><span style="--0:#BD93F9;--1:#005CC5">2</span><span style="--0:#F8F8F2;--1:#24292E">]; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">nums[i] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">2</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="public void setColors(int[] nums) {    int[] cnt = new int[3];    for (int num : nums) {        cnt[num]++;    }    // 对 nums 排序，前中后 0 1 2    for (int i = 0; i < cnt[0]; i++) {        nums[i] = 0;    }    for (int i = cnt[0]; i < cnt[0] + cnt[1]; i++) {        nums[i] = 1;    }    for (int i = cnt[0] + cnt[1]; i < cnt[0] + cnt[1] + cnt[2]; i++) {        nums[i] = 2;    }}"><div></div></button></div></figure></div>
<p>注：cnt 的数组中，下标代表 nums 中的元素值（当前只有 0，1，2）三种元素，每一项存储了 nums 中值为 i 的数量之和</p>
<p>当前代码的局限性</p>
<p>只能处理 0，1，2 这三种元素</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[] cnt </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--0fw:bold;--1:#BF3441">new</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[</span><span style="--0:#BD93F9;--1:#005CC5">3</span><span style="--0:#F8F8F2;--1:#24292E">];</span></div></div><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> num </span><span style="--0:#FF79C6;--1:#BF3441">:</span><span style="--0:#F8F8F2;--1:#24292E"> nums) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">cnt[num]</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="int[] cnt = new int[3];for(int num : nums) {    cnt[num]++;}"><div></div></button></div></figure></div>
<p>如果数字的可能范围是 <code>[0, R)</code>
那么可以改写为 <code>int[] cnt = new int[R]</code></p>
<p>计数排序需要的空间：O(R)
只适用小数据范围</p>
<p>如果数字的可能范围是 <code>[L, R]</code>
<code>int[] cnt = new int[R-L+1]</code>
<code>cnt[num-L]++</code></p>
<p>如果取值范围是<code>[0, 101)</code>, 不可能写 101 个 for 循环</p>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">总结 cnt 和 index 对应关系</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">0: [0, cnt[0])</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">1: [cnt[0], cnt[0] + cnt[1])</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">2: [cnt[0] + cnt[1], cnt[0] + cnt[1] + cnt[2])</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">3: [cnt[0] + cnt[1]+ cnt[2], cnt[0] + cnt[1] + cnt[2]+ cnt[3])</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">可以看到，排序就是</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">把 [0, cnt[0]) 设置为 0</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">把 [cnt[0], cnt[0] + cnt[1])) 设置为 1</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">把 [cnt[0] + cnt[1], cnt[0] + cnt[1] + cnt[2]) 设置为 2</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">……</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="总结 cnt 和 index 对应关系0: [0, cnt[0])1: [cnt[0], cnt[0] + cnt[1])2: [cnt[0] + cnt[1], cnt[0] + cnt[1] + cnt[2])3: [cnt[0] + cnt[1]+ cnt[2], cnt[0] + cnt[1] + cnt[2]+ cnt[3])可以看到，排序就是把 [0, cnt[0]) 设置为 0把 [cnt[0], cnt[0] + cnt[1])) 设置为 1把 [cnt[0] + cnt[1], cnt[0] + cnt[1] + cnt[2]) 设置为 2……"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="text"><code><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#f8f8f2;--1:#24292e">        </span></span><span style="--0:#f8f8f2;--1:#24292e">0  1  2  3</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">cnt     2  3  5  6</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">index   0  2  5  10  16</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">新开辟数组 index, 把 [index[i], index[i+1]) 区间的值为 i</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">index 中值的计算</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">index[1] = index[0] + cnt[0] (0+2=2)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">index[2] = index[1] + cnt[1] (2+3=5)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">index[3] = index[2] + cnt[2] (5+5=10)</span></div></div><div class="ec-line"><div class="code"><span style="--0:#f8f8f2;--1:#24292e">……</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="        0  1  2  3cnt     2  3  5  6index   0  2  5  10  16新开辟数组 index, 把 [index[i], index[i+1]) 区间的值为 iindex 中值的计算index[1] = index[0] + cnt[0] (0+2=2)index[2] = index[1] + cnt[1] (2+3=5)index[3] = index[2] + cnt[2] (5+5=10)……"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame"><figcaption class="header"></figcaption><pre data-language="java"><code><div class="ec-line"><div class="code"><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--1:#BF3441">class</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--1:#6F42C1">Solution</span><span style="--0:#F8F8F2;--1:#24292E"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#FF79C6;--1:#BF3441">public</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">void</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#50FA7B;--1:#6F42C1">setColors</span><span style="--0:#F8F8F2;--1:#24292E">(</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[] </span><span style="--0:#FFB86C;--0fs:italic;--1:#AE4B07">nums</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#96A1C2;--1:#616972">// 处理元素取值范围是 [0, R) 的计数排序</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> R </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">3</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[] cnt </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--0fw:bold;--1:#BF3441">new</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[R];</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> num </span><span style="--0:#FF79C6;--1:#BF3441">:</span><span style="--0:#F8F8F2;--1:#24292E"> nums) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">cnt[num]</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#96A1C2;--1:#616972">// [index[i], index[i + 1]) 的值为 1</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[] index </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#FF79C6;--0fw:bold;--1:#BF3441">new</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E">[R </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">index[</span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> R; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">index[i </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> index[i] </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> cnt[i];</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> i </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">0</span><span style="--0:#F8F8F2;--1:#24292E">; i </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> index.length </span><span style="--0:#FF79C6;--1:#BF3441">-</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">; i</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#FF79C6;--1:#BF3441">for</span><span style="--0:#F8F8F2;--1:#24292E"> (</span><span style="--0:#8BE9FD;--0fs:italic;--1:#BF3441">int</span><span style="--0:#F8F8F2;--1:#24292E"> j </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> index[i]; j </span><span style="--0:#FF79C6;--1:#BF3441">&#x3C;</span><span style="--0:#F8F8F2;--1:#24292E"> index[i </span><span style="--0:#FF79C6;--1:#BF3441">+</span><span style="--0:#F8F8F2;--1:#24292E"> </span><span style="--0:#BD93F9;--1:#005CC5">1</span><span style="--0:#F8F8F2;--1:#24292E">]; j</span><span style="--0:#FF79C6;--1:#BF3441">++</span><span style="--0:#F8F8F2;--1:#24292E">) {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">                </span></span><span style="--0:#F8F8F2;--1:#24292E">nums[j] </span><span style="--0:#FF79C6;--1:#BF3441">=</span><span style="--0:#F8F8F2;--1:#24292E"> i;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">            </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">        </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#F8F8F2;--1:#24292E">    </span></span><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#F8F8F2;--1:#24292E">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="public class Solution {    public void setColors(int[] nums) {        // 处理元素取值范围是 [0, R) 的计数排序        int R = 3;        int[] cnt = new int[R];        for (int num : nums) {            cnt[num]++;        }        // [index[i], index[i + 1]) 的值为 1        int[] index = new int[R + 1];        index[0] = 0;        for (int i = 0; i < R; i++) {            index[i + 1] = index[i] + cnt[i];        }        for (int i = 0; i < index.length - 1; i++) {            for (int j = index[i]; j < index[i + 1]; j++) {                nums[j] = i;            }        }    }}"><div></div></button></div></figure></div> </article> <ul class="my-8 astro-vj4tpspi"> <li class="inline-block my-1 underline-offset-4 astro-blwjyjpt"> <a href="/tags/数据结构/" class="text-sm pr-2 group astro-blwjyjpt" data-astro-transition-scope="astro-36ssibgs-2"> <svg xmlns="http://www.w3.org/2000/svg" class=" scale-75 astro-blwjyjpt"><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class="astro-blwjyjpt"></path> </svg>
&nbsp;<span class="astro-blwjyjpt">数据结构</span> </a> </li> <li class="inline-block my-1 underline-offset-4 astro-blwjyjpt"> <a href="/tags/算法/" class="text-sm pr-2 group astro-blwjyjpt" data-astro-transition-scope="astro-36ssibgs-3"> <svg xmlns="http://www.w3.org/2000/svg" class=" scale-75 astro-blwjyjpt"><path d="M16.018 3.815 15.232 8h-4.966l.716-3.815-1.964-.37L8.232 8H4v2h3.857l-.751 4H3v2h3.731l-.714 3.805 1.965.369L8.766 16h4.966l-.714 3.805 1.965.369.783-4.174H20v-2h-3.859l.751-4H21V8h-3.733l.716-3.815-1.965-.37zM14.106 14H9.141l.751-4h4.966l-.752 4z" class="astro-blwjyjpt"></path> </svg>
&nbsp;<span class="astro-blwjyjpt">算法</span> </a> </li>  </ul> <div class="flex flex-col-reverse items-center justify-between gap-6 sm:flex-row-reverse sm:items-end sm:gap-4 astro-vj4tpspi"> <button id="back-to-top" class="focus-outline whitespace-nowrap py-1 hover:opacity-75 astro-vj4tpspi"> <svg xmlns="http://www.w3.org/2000/svg" class="rotate-90 astro-vj4tpspi"> <path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z" class="astro-vj4tpspi"></path> </svg> <span class="astro-vj4tpspi">Back to Top</span> </button> <div class="social-icons astro-wkojbtzc"> <span class="italic astro-wkojbtzc">Share this post on:</span> <div class="text-center astro-wkojbtzc"> <a href="https://wa.me/?text=https://xiecang.cc/posts/data-structures-and-algorithms/" class="group inline-block hover:text-skin-accent link-button astro-wkojbtzc" title="Share this post via WhatsApp"> <svg
      xmlns="http://www.w3.org/2000/svg"
      class="icon-tabler"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M3 21l1.65 -3.8a9 9 0 1 1 3.4 2.9l-5.05 .9"></path>
      <path d="M9 10a0.5 .5 0 0 0 1 0v-1a0.5 .5 0 0 0 -1 0v1a5 5 0 0 0 5 5h1a0.5 .5 0 0 0 0 -1h-1a0.5 .5 0 0 0 0 1"></path>
    </svg> <span class="sr-only astro-wkojbtzc">Share this post via WhatsApp</span> </a><a href="https://www.facebook.com/sharer.php?u=https://xiecang.cc/posts/data-structures-and-algorithms/" class="group inline-block hover:text-skin-accent link-button astro-wkojbtzc" title="Share this post on Facebook"> <svg
    xmlns="http://www.w3.org/2000/svg"
    class="icon-tabler"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <path
      d="M7 10v4h3v7h4v-7h3l1 -4h-4v-2a1 1 0 0 1 1 -1h3v-4h-3a5 5 0 0 0 -5 5v2h-3"
    ></path>
  </svg> <span class="sr-only astro-wkojbtzc">Share this post on Facebook</span> </a><a href="https://twitter.com/intent/tweet?url=https://xiecang.cc/posts/data-structures-and-algorithms/" class="group inline-block hover:text-skin-accent link-button astro-wkojbtzc" title="Tweet this post"> <svg
      xmlns="http://www.w3.org/2000/svg"
      class="icon-tabler"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z"></path>
    </svg> <span class="sr-only astro-wkojbtzc">Tweet this post</span> </a><a href="https://t.me/share/url?url=https://xiecang.cc/posts/data-structures-and-algorithms/" class="group inline-block hover:text-skin-accent link-button astro-wkojbtzc" title="Share this post via Telegram"> <svg
        xmlns="http://www.w3.org/2000/svg"
        class="icon-tabler"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <path d="M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4"></path>
      </svg> <span class="sr-only astro-wkojbtzc">Share this post via Telegram</span> </a><a href="https://pinterest.com/pin/create/button/?url=https://xiecang.cc/posts/data-structures-and-algorithms/" class="group inline-block hover:text-skin-accent link-button astro-wkojbtzc" title="Share this post on Pinterest"> <svg
      xmlns="http://www.w3.org/2000/svg"
      class="icon-tabler"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <line x1="8" y1="20" x2="12" y2="11"></line>
      <path d="M10.7 14c.437 1.263 1.43 2 2.55 2c2.071 0 3.75 -1.554 3.75 -4a5 5 0 1 0 -9.7 1.7"></path>
      <circle cx="12" cy="12" r="9"></circle>
    </svg> <span class="sr-only astro-wkojbtzc">Share this post on Pinterest</span> </a><a href="mailto:?subject=See%20this%20post&#38;body=https://xiecang.cc/posts/data-structures-and-algorithms/" class="group inline-block hover:text-skin-accent link-button astro-wkojbtzc" title="Share this post via email"> <svg
      xmlns="http://www.w3.org/2000/svg"
      class="icon-tabler"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <rect x="3" y="5" width="18" height="14" rx="2"></rect>
      <polyline points="3 7 12 13 21 7"></polyline>
    </svg> <span class="sr-only astro-wkojbtzc">Share this post via email</span> </a> </div> </div>  </div> <hr class="my-6 border-dashed astro-vj4tpspi"> <!-- Previous/Next Post Buttons --> <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 astro-vj4tpspi"> <a href="/posts/os-memory-management" class="flex w-full gap-1 hover:opacity-75 astro-vj4tpspi"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left flex-none astro-vj4tpspi">  <path stroke="none" d="M0 0h24v24H0z" fill="none" class="astro-vj4tpspi"></path> <path d="M15 6l-6 6l6 6" class="astro-vj4tpspi"></path>  </svg> <div class="astro-vj4tpspi"> <span class="astro-vj4tpspi">Previous Post</span> <div class="text-sm text-skin-accent/85 astro-vj4tpspi">操作系统之内存管理</div> </div> </a> <a href="/posts/how-to-implement-pipes-in-shell" class="flex w-full justify-end gap-1 text-right hover:opacity-75 sm:col-start-2 astro-vj4tpspi"> <div class="astro-vj4tpspi"> <span class="astro-vj4tpspi">Next Post</span> <div class="text-sm text-skin-accent/85 astro-vj4tpspi">如何在 shell 中实现管道？</div> </div> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-right flex-none astro-vj4tpspi">  <path stroke="none" d="M0 0h24v24H0z" fill="none" class="astro-vj4tpspi"></path> <path d="M9 6l6 6l-6 6" class="astro-vj4tpspi"></path>  </svg> </a> </div> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).only=e;window.dispatchEvent(new Event("astro:only"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="1VxurH" component-url="/_astro/Comments.ChHDAwqG.js" component-export="default" renderer-url="/_astro/client.BIGLHmRd.js" props="{&quot;class&quot;:[0,&quot;astro-vj4tpspi&quot;]}" ssr="" client="only" opts="{&quot;name&quot;:&quot;Comments&quot;,&quot;value&quot;:&quot;react&quot;}"></astro-island> </main> <footer class="mt-auto astro-sz7xmlte"> <div class="max-w-3xl mx-auto px-0"> <hr class="border-skin-line" aria-hidden="true"> </div> <div class="footer-wrapper astro-sz7xmlte"> <div class="social-icons flex astro-upu6fzxr"> <a href="https://github.com/xiecang" class="group inline-block hover:text-skin-accent link-button astro-upu6fzxr" title=" Cang's Blog on Github"> <svg
    xmlns="http://www.w3.org/2000/svg"
    class="icon-tabler"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <path
      d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"
    ></path>
  </svg> <span class="sr-only astro-upu6fzxr"> Cang&#39;s Blog on Github</span> </a> </div>  <div class="copyright-wrapper astro-sz7xmlte"> <span class="astro-sz7xmlte">Copyright &#169; 2024</span> <span class="separator astro-sz7xmlte">&nbsp;|&nbsp;</span> <span class="astro-sz7xmlte">All rights reserved.</span> </div> </div> </footer>  <meta data-website-id="a828d832-99b6-49d2-83cd-3bdabf448261" id="id-umami"><script type="text/partytown" src="https://analytics.xiecang.cc/script.js" data-website-id="a828d832-99b6-49d2-83cd-3bdabf448261"></script><script type="text/partytown">
  const umamiElement = document.querySelector("#id-umami");
  let umami_id = "";
  if (umamiElement) {
    umami_id = umamiElement.getAttribute("data-website-id") || "";
  }
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(parameters);
  }
  gtag("js", new Date());
  gtag("config", umami_id);
</script>  </body></html>  <script data-astro-rerun>
  /** Create a progress indicator
   *  at the top */
  function createProgressBar() {
    // Create the main container div
    const progressContainer = document.createElement("div");
    progressContainer.className =
      "progress-container fixed top-0 z-10 h-1 w-full bg-skin-fill";

    // Create the progress bar div
    const progressBar = document.createElement("div");
    progressBar.className = "progress-bar h-1 w-0 bg-skin-accent";
    progressBar.id = "myBar";

    // Append the progress bar to the progress container
    progressContainer.appendChild(progressBar);

    // Append the progress container to the document body or any other desired parent element
    document.body.appendChild(progressContainer);
  }
  createProgressBar();

  /** Update the progress bar
   *  when user scrolls */
  function updateScrollProgress() {
    document.addEventListener("scroll", () => {
      const winScroll =
        document.body.scrollTop || document.documentElement.scrollTop;
      const height =
        document.documentElement.scrollHeight -
        document.documentElement.clientHeight;
      const scrolled = (winScroll / height) * 100;
      if (document) {
        const myBar = document.getElementById("myBar");
        if (myBar) {
          myBar.style.width = scrolled + "%";
        }
      }
    });
  }
  // updateScrollProgress();

  /** Attaches links to headings in the document,
   *  allowing sharing of sections easily */
  function addHeadingLinks() {
    const headings = Array.from(
      document.querySelectorAll("h2, h3, h4, h5, h6")
    );
    for (const heading of headings) {
      heading.classList.add("group");
      const link = document.createElement("a");
      link.className =
        "heading-link ml-2 opacity-0 group-hover:opacity-100 focus:opacity-100";
      link.href = "#" + heading.id;

      const span = document.createElement("span");
      span.ariaHidden = "true";
      span.innerText = "#";
      link.appendChild(span);
      heading.appendChild(link);
    }
  }
  addHeadingLinks();

  /** Attaches copy buttons to code blocks in the document,
   * allowing users to copy code easily. */
  function attachCopyButtons() {
    const copyButtonLabel = "Copy";
    const codeBlocks = Array.from(document.querySelectorAll("pre"));

    for (const codeBlock of codeBlocks) {
      const wrapper = document.createElement("div");
      wrapper.style.position = "relative";

      const copyButton = document.createElement("button");
      copyButton.className =
        "copy-code absolute right-3 -top-3 rounded bg-skin-card px-2 py-1 text-xs leading-4 text-skin-base font-medium";
      copyButton.innerHTML = copyButtonLabel;
      codeBlock.setAttribute("tabindex", "0");
      codeBlock.appendChild(copyButton);

      // wrap codebock with relative parent element
      codeBlock?.parentNode?.insertBefore(wrapper, codeBlock);
      wrapper.appendChild(codeBlock);

      copyButton.addEventListener("click", async () => {
        await copyCode(codeBlock, copyButton);
      });
    }

    async function copyCode(block, button) {
      const code = block.querySelector("code");
      const text = code?.innerText;

      await navigator.clipboard.writeText(text ?? "");

      // visual feedback that task is completed
      button.innerText = "Copied";

      setTimeout(() => {
        button.innerText = copyButtonLabel;
      }, 700);
    }
  }
  // attachCopyButtons();

  /** Scrolls the document to the top when
   * the "Back to Top" button is clicked. */
  function backToTop() {
    document.querySelector("#back-to-top")?.addEventListener("click", () => {
      document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    });
  }
  backToTop();

  /* Go to page start after page swap */
  document.addEventListener("astro:after-swap", () =>
    window.scrollTo({ left: 0, top: 0, behavior: "instant" })
  );
</script>